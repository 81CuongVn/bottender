<!DOCTYPE html><html lang="zh-TW"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>LINE Notify · Bottender</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## What is LINE Notify"/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="zh-TW"/><meta property="og:title" content="LINE Notify · Bottender"/><meta property="og:type" content="website"/><meta property="og:url" content="https://bottender.js.org/"/><meta property="og:description" content="## What is LINE Notify"/><meta property="og:image" content="https://bottender.js.org/img/og-image.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://bottender.js.org/img/og-image.png"/><link rel="shortcut icon" href="/img/favicon-192x192.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"/><link rel="alternate" type="application/atom+xml" href="https://bottender.js.org/blog/atom.xml" title="Bottender Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://bottender.js.org/blog/feed.xml" title="Bottender Blog RSS Feed"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-70309045-11"></script><script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments); }
              gtag('js', new Date());
              gtag('config', 'UA-70309045-11');
            </script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:700|Roboto&amp;display=swap"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-blocks-buttons.js"></script><script type="text/javascript" src="/js/sw.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/zh-TW"><img class="logo" src="/img/bottender.svg" alt="Bottender"/><h2 class="headerTitleWithLogo">Bottender</h2></a><a href="/zh-TW/versions"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/zh-TW/next/getting-started" target="_self">文件</a></li><li class=""><a href="/docs/zh-TW/next/api-context" target="_self">API</a></li><li class=""><a href="/blog/" target="_self">部落格</a></li><li class=""><a href="/zh-TW/users" target="_self">用戶</a></li><li class=""><a href="https://github.com/Yoctol/bottender/tree/master/examples" target="_self">範例</a></li><li class=""><a href="https://github.com/yoctol/bottender" target="_self">GitHub</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>繁體中文</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/next/channel-line-notify">English</a></li><li><a href="https://crowdin.com/project/bottender" target="_blank" rel="noreferrer noopener">幫忙翻譯</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>指南（LINE）</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">入門</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/getting-started">入門</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/migrating-v1">Migrating from v0.x to v1</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">基礎</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/the-basics-console-mode">Console 模式</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/the-basics-actions">Bottender Actions</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/the-basics-routing">路由</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/the-basics-chain">責任鏈</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/the-basics-session">Session</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/the-basics-errors">錯誤處理</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">進階指南</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/advanced-guides-custom-server">在自訂 Server 上執行 Bottender</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/advanced-guides-deployment">部署</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/advanced-guides-nlu">自然語言理解</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/advanced-guides-multi-channel">支援多平台</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">指南（Messenger）</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-messenger-setup">Messenger Setup</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-messenger-handling-events">處理 Messenger 事件</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-messenger-sending-messages">發送 Messenger 訊息</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-messenger-routing">Messenger 路由</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-messenger-profile">Messenger Profile</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-messenger-handover-protocol">Messenger Handover Protocol</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-messenger-persona">使用 Messenger Persona</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-messenger-multi-page">支援多個 Messenger 粉絲頁</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">指南（WhatsApp）</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-whatsapp-setup">WhatsApp Setup</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-whatsapp-handling-events">處理 WhatsApp 事件</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-whatsapp-sending-messages">發送 WhatsApp 訊息</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-whatsapp-routing">WhatsApp 路由</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">指南（LINE）</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-line-setup">LINE Setup</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-line-handling-events">處理 LINE 事件</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-line-sending-messages">發送 LINE 訊息</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-line-routing">LINE 路由</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-line-flex">Flex Messages</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-line-rich-menu">LINE Rich Menu</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-line-liff">LINE Front-end Framework (LIFF)</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/zh-TW/next/channel-line-notify">LINE Notify</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-line-errors">在 LINE 中處理錯誤</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-line-migrating-from-sdk">從 Node.js LINE SDK 遷移</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">指南（Slack）</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-slack-setup">Slack Setup</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-slack-handling-events">處理 Slack 事件</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-slack-sending-messages">發送 Slack 訊息</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-slack-routing">Slack 路由</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-slack-slash-command">處理 Slack Slash Commands</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-slack-block-kit">Slack Block Kit</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">指南（Telegram）</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-telegram-setup">Telegram Setup</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-telegram-handling-events">處理 Telegram 事件</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-telegram-sending-messages">發送 Telegram 訊息</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-telegram-routing">Telegram 路由</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">指南（Viber）</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-viber-setup">Viber Setup</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-viber-handling-events">處理 Viber 事件</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-viber-sending-messages">發送 Viber 訊息</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/next/channel-viber-routing">Viber 路由</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/bottender/zh-TW" target="_blank" rel="noreferrer noopener">Translate</a><h1 id="__docusaurus" class="postHeaderTitle">LINE Notify</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="what-is-line-notify"></a><a href="#what-is-line-notify" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What is LINE Notify</h2>
<p><a href="https://notify-bot.line.me">LINE Notify</a> is a LINE service that lets you send notifications to the subscribed users. Once a user subscribed to your service on LINE Notify, the user will become friends with LINE Notify automatically and you can send messages to the user through LINE Notify without extra cost.</p>
<h2><a class="anchor" aria-hidden="true" id="how-to-use-line-notify-in-bottender"></a><a href="#how-to-use-line-notify-in-bottender" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to Use LINE Notify in Bottender</h2>
<p>If you want to have a clean project with LINE Notify, you could start from <a href="https://github.com/Yoctol/bottender/tree/master/examples/line-notify">this example</a> to develop your project. You can follow the following four steps to create your project:</p>
<ol>
<li>Download the code from <a href="https://github.com/Yoctol/bottender/tree/master/examples/line-notify"><code>line-notify</code> example</a>.</li>
<li>Run <code>yarn</code> or <code>npm install</code> command to install all dependencies.</li>
<li>Fill the <code>.env</code> file with the correct values.</li>
<li>Run <code>yarn dev</code> or <code>npm run dev</code> to start the dev server.</li>
</ol>
<p>If you want to have the folder structure we recommend, you could start with <a href="/docs/zh-TW/next/getting-started#create-a-new-bottender-app">create-bottender-app</a> command and migrate it by following the migration instructions below.</p>
<h3><a class="anchor" aria-hidden="true" id="creating-a-line-notify-service"></a><a href="#creating-a-line-notify-service" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating a LINE Notify Service</h3>
<p>To create a new LINE Notify service, open this <a href="https://notify-bot.line.me/my/services/new">link</a> and submit the form after you finish it.</p>
<p><img src="https://user-images.githubusercontent.com/3382565/74317707-da4baa80-4db6-11ea-93b0-68b5e6f2c8a9.png" alt=""></p>
<p>The value of the callback URL should look like: <code>https://{your domain}.ngrok.io/notify/redirect</code></p>
<p>Official API document：<a href="https://notify-bot.line.me/doc/en/">https://notify-bot.line.me/doc/en/</a></p>
<blockquote>
<p><strong>Note:</strong> <a href="https://ngrok.com/">ngrok</a> is a well-known service that provides public HTTPs URLs for your local server using the tunnel. It's handy when you develop your bot locally. You may want to use it when developing.</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="environment-variables-setting"></a><a href="#environment-variables-setting" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Environment Variables Setting</h3>
<p>If you are familiar with any official Bottender example, you may already know about how to use the <code>.env</code> file to manage your environment variables in your local project.</p>
<p>In this case, you need to add <code>LINE_NOTIFY_CLIENT_ID</code>, <code>LINE_NOTIFY_CLIENT_SECRET</code> and <code>ROOT_PATH</code> to the <code>.env</code> file, so your file has those LINE related environment variables:</p>
<pre><code class="hljs">LINE_ACCESS_TOKEN={your LINE access token <span class="hljs-keyword">from</span> LINE Messaging API channel}
LINE_CHANNEL_SECRET={your LINE channel<span class="hljs-built_in"> secret </span><span class="hljs-keyword">from</span> LINE Messaging API channel}

LINE_NOTIFY_CLIENT_ID={your LINE Notify<span class="hljs-built_in"> client </span>id}
LINE_NOTIFY_CLIENT_SECRET={your LINE Notify<span class="hljs-built_in"> client </span>secret}
ROOT_PATH={the ngrok public link}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="preparing-the-line-notify-instance"></a><a href="#preparing-the-line-notify-instance" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Preparing the LINE Notify Instance</h3>
<p>LINE Notify uses OAuth2 as the authorization mechanism. The minimum flow is as follows:</p>
<ol>
<li>Guide users to the LINE Notify authorization page.</li>
<li>Receive the authorization code from LINE Notify redirect.</li>
<li>Exchange an access token with the authorization code.</li>
<li>Send a notification by the access token.</li>
</ol>
<p>Bottender provides a class <code>LineNotify</code> to help you deal with LINE Notify APIs. You can create an instance of <code>LINENotify</code> for later use.</p>
<p>Create a <code>lineNotify.js</code> file in the root directory of the project and copy the following code into it:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> { LineNotify } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'bottender'</span>);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> LineNotify({
  <span class="hljs-attr">clientId</span>: process.env.LINE_NOTIFY_CLIENT_ID,
  <span class="hljs-attr">clientSecret</span>: process.env.LINE_NOTIFY_CLIENT_SECRET,
  <span class="hljs-attr">redirectUri</span>: <span class="hljs-string">`<span class="hljs-subst">${process.env.ROOT_PATH}</span>/notify/redirect`</span>,
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="guiding-users-to-the-line-notify-authorization-page"></a><a href="#guiding-users-to-the-line-notify-authorization-page" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Guiding Users to the LINE Notify Authorization Page</h3>
<p>To serve webpages, we need to add additional routes to the server. Fortunately, <a href="/docs/zh-TW/next/advanced-guides-custom-server#the-concept">custom server</a> come to the rescue!</p>
<p>You could use express, koa, restify, or whatever you like, but we are going to use express in this guide. Before going down, make sure that you set up correctly according to <a href="/docs/zh-TW/next/advanced-guides-custom-server#express">this guide</a>.</p>
<p>Modify <code>src/index.js</code> to send the authorization link to your users:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> lineNotify = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../lineNotify'</span>);

<span class="hljs-built_in">module</span>.exports = <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params">context</span>) </span>{
  <span class="hljs-keyword">const</span> url = lineNotify.getAuthLink(<span class="hljs-string">'test'</span>);
  <span class="hljs-keyword">await</span> context.sendText(url);
};
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="receiving-authorization-code-from-redirect-and-send-notification-by-access-token"></a><a href="#receiving-authorization-code-from-redirect-and-send-notification-by-access-token" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Receiving Authorization Code from Redirect and Send Notification by Access Token</h3>
<p>Add the following code snippet into <code>server.js</code> to handle redirects from LINE Notify.</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> lineNotify = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../lineNotify'</span>);
<span class="hljs-comment">// ...</span>

app.prepare().then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-comment">//...</span>

  server.get(<span class="hljs-string">'/notify/redirect'</span>, <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>) </span>{
    <span class="hljs-keyword">const</span> code = req.query.code;
    <span class="hljs-keyword">const</span> token = <span class="hljs-keyword">await</span> lineNotify.getToken(code);
    <span class="hljs-keyword">await</span> lineNotify.sendNotify(token, <span class="hljs-string">'Hello bottender!'</span>);
    res.send(<span class="hljs-string">'Subscribe successfully. Please close this page.'</span>);
  });

  <span class="hljs-comment">// routes for webhook request</span>
  <span class="hljs-comment">// ...</span>
});
</code></pre>
<p>You can find all your subscriptions on the <a href="https://notify-bot.line.me/my/">Connected Services</a> page.</p>
<blockquote>
<p><strong>Note:</strong> You should store access tokens for sending notifications in the future. We don't store them here, because it helps us simplify this demo.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="limitations"></a><a href="#limitations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Limitations</h2>
<ol>
<li>The message format only allows text, image, and basic sticker, so you can't send, for example, a message with some buttons.</li>
<li>You can't have more than 1000 characters in a single text message.</li>
<li>The rate limit is 1000 messages per token per hour.</li>
</ol>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/zh-TW/next/channel-line-liff"><span class="arrow-prev">← </span><span>LINE Front-end Framework (LIFF)</span></a><a class="docs-next button" href="/docs/zh-TW/next/channel-line-errors"><span>在 LINE 中處理錯誤</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#what-is-line-notify">What is LINE Notify</a></li><li><a href="#how-to-use-line-notify-in-bottender">How to Use LINE Notify in Bottender</a><ul class="toc-headings"><li><a href="#creating-a-line-notify-service">Creating a LINE Notify Service</a></li><li><a href="#environment-variables-setting">Environment Variables Setting</a></li><li><a href="#preparing-the-line-notify-instance">Preparing the LINE Notify Instance</a></li><li><a href="#guiding-users-to-the-line-notify-authorization-page">Guiding Users to the LINE Notify Authorization Page</a></li><li><a href="#receiving-authorization-code-from-redirect-and-send-notification-by-access-token">Receiving Authorization Code from Redirect and Send Notification by Access Token</a></li></ul></li><li><a href="#limitations">Limitations</a></li></ul></nav></div><footer class="nav-footer" id="footer"><div class="footer-layout"><div><div style="margin-bottom:16px"><a href="https://yoctol.ai" target="_blank" rel="noopener noreferrer"><img width="104px" src="/img/element_YOCTOL.AI_horizontal_S.svg" alt="YOCTOL.AI Logo"/></a></div><div class="desktop"><p class="text">© 2019 - PRESENT YOCTOL.AI ALL RIGHTS RESERVED.</p><a class="text" href="https://yoctol.ai/terms-of-use" target="_blank" rel="noopener noreferrer">Terms of Use</a><a class="text" href="https://yoctol.ai/privacy-policy" target="_blank" rel="noopener noreferrer" style="margin-left:16px">Privacy Policy</a></div></div><div class="footer-contacts"><h4 class="title">Contact Us</h4><p class="text">YOCTOL.AI</p><p class="text">service@yoctol.com</p></div><div class="footer-medias"><h4 class="title">Social Media</h4><div class="icons"><a href="https://twitter.com/yoctol" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="#FFF" fill-rule="nonzero" d="M1.5 0h21A1.5 1.5 0 0 1 24 1.5v21a1.5 1.5 0 0 1-1.5 1.5h-21A1.5 1.5 0 0 1 0 22.5v-21A1.5 1.5 0 0 1 1.5 0zm7.532 18c6.037 0 9.34-4.617 9.34-8.621 0-.131 0-.262-.01-.392A6.419 6.419 0 0 0 20 7.42c-.6.245-1.235.406-1.885.477a3.097 3.097 0 0 0 1.443-1.676 6.92 6.92 0 0 1-2.085.735c-1.017-.999-2.634-1.243-3.944-.596-1.31.647-1.986 2.024-1.65 3.36-2.64-.123-5.099-1.273-6.765-3.166-.872 1.384-.427 3.155 1.016 4.045a3.468 3.468 0 0 1-1.49-.38v.039c0 1.442 1.102 2.684 2.634 2.97-.484.122-.99.14-1.483.052.43 1.234 1.663 2.08 3.067 2.104a6.945 6.945 0 0 1-4.077 1.3c-.26 0-.522-.015-.781-.044a9.867 9.867 0 0 0 5.032 1.359V18z"></path></svg></a><a href="https://www.linkedin.com/company/yoctol/" target="_blank" rel="noopener noreferrer" style="margin-left:8px"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="#FFF" fill-rule="nonzero" d="M1.5 0h21A1.5 1.5 0 0 1 24 1.5v21a1.5 1.5 0 0 1-1.5 1.5h-21A1.5 1.5 0 0 1 0 22.5v-21A1.5 1.5 0 0 1 1.5 0zm6.086 19.636V9.281H4.368v10.355h3.218zM5.944 7.801A1.877 1.877 0 0 0 7.82 5.925 1.876 1.876 0 1 0 5.945 7.8zm13.697 11.835v-5.679c0-2.788-.602-4.933-3.861-4.933-1.565 0-2.615.859-3.045 1.672h-.043V9.281H9.604v10.355h3.216v-5.123c0-1.35.258-2.658 1.932-2.658 1.65 0 1.673 1.545 1.673 2.746v5.035h3.216z"></path></svg></a></div></div><div class="footer-product"><h4 class="title">Product</h4><div class="icons"><a href="https://yoctol.ai/creator" target="_blank" rel="noopener noreferrer" style="margin-top:1px;margin-right:10px"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><g fill="none" fill-rule="nonzero"><path d="M-1-2h24v24H-1z"></path><path fill="#FFF" d="M4.129 12c.309 3.386 3.267 6.042 6.871 6.042 3.604 0 6.562-2.656 6.871-6.042H22c-.317 5.574-5.12 10-11 10S.317 17.574 0 12h4.129zM14 9a1 1 0 1 1 0 2 1 1 0 0 1 0-2zM8 9a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm14-9v10h-4.113V4.116H7.814A3.703 3.703 0 0 0 4.113 7.82V10H0V7.82A7.817 7.817 0 0 1 7.685.001L7.815 0H22z"></path></g></svg></a><a href="https://yoctol.ai/seeker" target="_blank" rel="noopener noreferrer" style="margin-right:10px"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="24" viewBox="0 0 22 24"><g fill="none" fill-rule="nonzero"><path d="M-1 0h24v24H-1z"></path><path fill="#FFF" d="M2.81 7.033l.004.004 3.123 3.137a.112.112 0 0 1 .017.137 5.957 5.957 0 0 0 .843 7.356 5.936 5.936 0 0 0 8.41.003 5.957 5.957 0 0 0 .839-7.355.112.112 0 0 1 .016-.138l3.122-3.136a.11.11 0 0 1 .158 0l.01.012c3.182 4.182 2.79 10.14-.915 13.86-4.1 4.117-10.77 4.115-14.87-.002-3.699-3.714-4.1-9.656-.941-13.836a.111.111 0 0 1 .184-.042zM8.5 11a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm5 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm5.942-7.854l.015.014a.175.175 0 0 1 0 .23L15.32 7.952a.138.138 0 0 1-.182.024 7.294 7.294 0 0 0-8.27-.002.138.138 0 0 1-.182-.024L2.544 3.384a.175.175 0 0 1 .014-.245c4.97-4.188 11.913-4.185 16.884.007z"></path></g></svg></a><a href="https://bottender.js.org/" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="24" viewBox="0 0 22 24"><g fill="none" fill-rule="evenodd"><path fill-rule="nonzero" d="M-1 0h24v24H-1z"></path><path fill="#FFF" d="M1.668 8.51c.258.075.548.159.867.244a9.055 9.055 0 0 0 .959 11.639l.206.202.102.098.022.139a2.63 2.63 0 0 1-.314 1.745c.351-.162.683-.36.99-.59l.227-.178.242-.196.264.162a9.343 9.343 0 0 0 4.898 1.379c5.115 0 9.276-4.107 9.276-9.154 0-.806-.107-1.607-.32-2.385.33.027.63.047.9.06.184.762.289 1.543.288 2.326 0 5.513-4.534 9.999-10.12 9.999a10.128 10.128 0 0 1-5.067-1.352c-1.039.78-2.395 1.228-3.574 1.289l-.269.007v-.845c.928-.002 1.807-.82 1.808-1.831 0-.057-.05-.113-.056-.17A9.891 9.891 0 0 1 1.668 8.51zM10 11a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm6 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zM9.379.02c2.551.437 3.144 1.75 3.144 1.75s1.02-1.037 3.57-.6c2.302.394 3.731 6.79 3.99 8.047 1.233.338 1.946.614 1.916.775l-.143.719c-.074.409-4.997-.07-10.837-1.07C5.179 8.638.506 7.495.579 7.086l.144-.74c.03-.162.797-.185 2.075-.091C3.484 5.161 7.08-.374 9.378.02z"></path></g></svg></a></div></div><div class="mobile"><p class="text">© 2019 - PRESENT YOCTOL.AI ALL RIGHTS RESERVED.</p><a class="text" href="https://yoctol.ai/terms-of-use" target="_blank" rel="noopener noreferrer">Terms of Use</a><a class="text" href="https://yoctol.ai/privacy-policy" target="_blank" rel="noopener noreferrer" style="margin-left:16px">Privacy Policy</a></div></div></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '3498a488684b0324b9d56808fad17a33',
                indexName: 'bottender',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:zh-TW","version:next"]}
              });
            </script></body></html>