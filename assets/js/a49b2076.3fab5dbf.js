"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[75739],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>k});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=a.createContext({}),c=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(i.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,i=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),u=c(n),k=r,d=u["".concat(i,".").concat(k)]||u[k]||m[k]||s;return n?a.createElement(d,l(l({ref:t},p),{},{components:n})):a.createElement(d,l({ref:t},p))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=n.length,l=new Array(s);l[0]=u;var o={};for(var i in t)hasOwnProperty.call(t,i)&&(o[i]=t[i]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var c=2;c<s;c++)l[c]=n[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},38755:(e,t,n)=>{n.r(t),n.d(t,{frontMatter:()=>o,contentTitle:()=>i,metadata:()=>c,toc:()=>p,default:()=>u});var a=n(87462),r=n(63366),s=(n(67294),n(3905)),l=["components"],o={id:"slack",title:"Slack",original_id:"slack"},i=void 0,c={unversionedId:"slack",id:"version-0.15.17/slack",isDocsHomePage:!1,title:"Slack",description:"This guide will give you some basic concepts of developing a Slack bot. For more detail, check official docs.",source:"@site/versioned_docs/version-0.15.17/Platforms-Slack.md",sourceDirName:".",slug:"/slack",permalink:"/docs/0.15.17/slack",editUrl:"https://github.com/Yoctol/bottender/edit/master/docs/versioned_docs/version-0.15.17/Platforms-Slack.md",tags:[],version:"0.15.17",lastUpdatedBy:"\u5433\u6771\u66c4 Wu, Dung-Ie",lastUpdatedAt:1636542901,formattedLastUpdatedAt:"11/10/2021",frontMatter:{id:"slack",title:"Slack",original_id:"slack"},sidebar:"version-0.15.17/docs",previous:{title:"LINE",permalink:"/docs/0.15.17/line"},next:{title:"Telegram",permalink:"/docs/0.15.17/telegram"}},p=[{value:"Requirements",id:"requirements",children:[],level:2},{value:"Build Your First Slack Bot",id:"build-your-first-slack-bot",children:[],level:2},{value:"Events",id:"events",children:[],level:2},{value:"Slack Specific",id:"slack-specific",children:[{value:"Message Format",id:"message-format",children:[],level:3},{value:"Channel",id:"channel",children:[],level:3},{value:"Get User Info from ID",id:"get-user-info-from-id",children:[],level:3}],level:2},{value:"References",id:"references",children:[],level:2}],m={toc:p};function u(e){var t=e.components,n=(0,r.Z)(e,l);return(0,s.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("p",null,"This guide will give you some basic concepts of developing a Slack bot. For more detail, check ",(0,s.kt)("a",{parentName:"p",href:"https://api.slack.com/"},"official docs"),"."),(0,s.kt)("h2",{id:"requirements"},"Requirements"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Slack App with following features:",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"Event Subscriptions"),(0,s.kt)("li",{parentName:"ul"},"Permissions"),(0,s.kt)("li",{parentName:"ul"},"Bots")))),(0,s.kt)("p",null,"First, create an app on ",(0,s.kt)("a",{parentName:"p",href:"https://api.slack.com/apps?new_app=1"},"Slack API")," site. Then set up its features:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Event Subscriptions:",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"Subscribe to ",(0,s.kt)("inlineCode",{parentName:"li"},"message.channels")," event, so your bot can receive message events."),(0,s.kt)("li",{parentName:"ul"},"Set up webhook URL after your bot server is up."))),(0,s.kt)("li",{parentName:"ul"},"Permissions:",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"Add ",(0,s.kt)("strong",{parentName:"li"},"bot")," ",(0,s.kt)("a",{parentName:"li",href:"https://api.slack.com/bot-users#api_usage"},"scope")," to your app"),(0,s.kt)("li",{parentName:"ul"},"Copy ",(0,s.kt)("strong",{parentName:"li"},"Bot User OAuth Access Token")," (access token) for later use."))),(0,s.kt)("li",{parentName:"ul"},"Bots:",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"Set up your bot's display name.")))),(0,s.kt)("h2",{id:"build-your-first-slack-bot"},"Build Your First Slack Bot"),(0,s.kt)("p",null,"Check out your app's ",(0,s.kt)("strong",{parentName:"p"},"access token")," ",(0,s.kt)("a",{parentName:"p",href:"https://api.slack.com/apps/"},"Slack API")," then fill them in ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/Yoctol/bottender/blob/master/examples/slack-hello-world/index.js"},"slack-hello-world")," example:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"const { SlackBot } = require('bottender');\n\nconst bot = new SlackBot({\n  accessToken: '__FILL_YOUR_TOKEN_HERE__',\n});\n")),(0,s.kt)("p",null,"Then run your server and try it out by invite the ",(0,s.kt)("strong",{parentName:"p"},"Bot User")," to a channel and talk to him/her/it!"),(0,s.kt)("h2",{id:"events"},"Events"),(0,s.kt)("p",null,"There are many types of events your bot may receive from Slack, but it's up to you whether to subscribe to each of them. In Bottender, you can access them via ",(0,s.kt)("inlineCode",{parentName:"p"},"context.event"),". For more information, check ",(0,s.kt)("a",{parentName:"p",href:"api-slackevent"},"SlackEvent Reference")," and ",(0,s.kt)("a",{parentName:"p",href:"https://api.slack.com/events"},"official docs"),"."),(0,s.kt)("p",null,"For the ",(0,s.kt)("strong",{parentName:"p"},"message")," related events, Bottender supports some helpers:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"isMessage"),(0,s.kt)("li",{parentName:"ul"},"isChannelsMessage"),(0,s.kt)("li",{parentName:"ul"},"isGroupsMessage"),(0,s.kt)("li",{parentName:"ul"},"isImMessage"),(0,s.kt)("li",{parentName:"ul"},"isMpimMessage"),(0,s.kt)("li",{parentName:"ul"},"isText"),(0,s.kt)("li",{parentName:"ul"},"message"),(0,s.kt)("li",{parentName:"ul"},"text")),(0,s.kt)("p",null,"For example:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"bot.onEvent(async (context) => {\n  if (context.event.isChannelsMessage) {\n    await context.sendText('Hello, this is a channels message!');\n  } else if (context.event.isGroupsMessage) {\n    await context.sendText('Hello, this is a groups message!');\n  } else if (context.event.isText && context.event.text === 'How are you?') {\n    await context.sendText('I am fine.');\n  } else {\n    await context.sendText('I do not understand.');\n  }\n});\n")),(0,s.kt)("h2",{id:"slack-specific"},"Slack Specific"),(0,s.kt)("h3",{id:"message-format"},"Message Format"),(0,s.kt)("p",null,"In Bottender, you can use function ",(0,s.kt)("inlineCode",{parentName:"p"},"context.sendText()")," to send messages. You can format messages with ",(0,s.kt)("a",{parentName:"p",href:"https://api.slack.com/docs/message-formatting"},"Slack message formatting"),". For more information, check ",(0,s.kt)("a",{parentName:"p",href:"api-slackcontext"},"SlackContext Reference")," and ",(0,s.kt)("a",{parentName:"p",href:"https://api.slack.com/methods/chat.postMessage"},"official docs"),"."),(0,s.kt)("h3",{id:"channel"},"Channel"),(0,s.kt)("p",null,"You can invite your bot account into a channel. By doing so, the events will create ",(0,s.kt)("strong",{parentName:"p"},"channel sessions"),". Send method ",(0,s.kt)("inlineCode",{parentName:"p"},"context.sendText()")," will send to the channel. You can still get the sender's profile with ",(0,s.kt)("inlineCode",{parentName:"p"},"context.session.user"),"."),(0,s.kt)("p",null,"You can access the channel and team members in ",(0,s.kt)("inlineCode",{parentName:"p"},"context.session.channel")," and ",(0,s.kt)("inlineCode",{parentName:"p"},"context.session.team"),"."),(0,s.kt)("h3",{id:"get-user-info-from-id"},"Get User Info from ID"),(0,s.kt)("p",null,"If you want to get user info from user ID, you can find it with ",(0,s.kt)("inlineCode",{parentName:"p"},"session.team")," info. For example, getting a user's name can be:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"function getNameFromId(id, session) {\n  return session.team.members.find((member) => member.id === id).name;\n}\n")),(0,s.kt)("h2",{id:"references"},"References"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://api.slack.com/"},"official docs"),": official docs of Slack API."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://github.com/Yoctol/messaging-apis/tree/master/packages/messaging-api-slack"},"messaging-api-slack")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://github.com/Yoctol/bottender/blob/master/examples/slack-hello-world/index.js"},"slack-hello-world")," example.")))}u.isMDXComponent=!0}}]);