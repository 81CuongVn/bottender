"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[530],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>d});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=r.createContext({}),s=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=s(e.components);return r.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,p=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),m=s(n),d=o,h=m["".concat(p,".").concat(d)]||m[d]||u[d]||a;return n?r.createElement(h,l(l({ref:t},c),{},{components:n})):r.createElement(h,l({ref:t},c))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,l=new Array(a);l[0]=m;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:o,l[1]=i;for(var s=2;s<a;s++)l[s]=n[s];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},49648:(e,t,n)=>{n.r(t),n.d(t,{frontMatter:()=>i,contentTitle:()=>p,metadata:()=>s,toc:()=>c,default:()=>m});var r=n(87462),o=n(63366),a=(n(67294),n(3905)),l=["components"],i={id:"channel-telegram-setup",title:"Telegram Setup",original_id:"channel-telegram-setup"},p=void 0,s={unversionedId:"channel-telegram-setup",id:"version-1.0.5/channel-telegram-setup",isDocsHomePage:!1,title:"Telegram Setup",description:"\u261d\ufe0fBy Bottender, you can begin your first Telegram Bot in 3 mins!!",source:"@site/versioned_docs/version-1.0.5/channel-telegram-setup.md",sourceDirName:".",slug:"/channel-telegram-setup",permalink:"/docs/1.0.5/channel-telegram-setup",editUrl:"https://github.com/Yoctol/bottender/edit/master/docs/versioned_docs/version-1.0.5/channel-telegram-setup.md",tags:[],version:"1.0.5",lastUpdatedBy:"\u5433\u6771\u66c4 Wu, Dung-Ie",lastUpdatedAt:1636542901,formattedLastUpdatedAt:"11/10/2021",frontMatter:{id:"channel-telegram-setup",title:"Telegram Setup",original_id:"channel-telegram-setup"},sidebar:"version-1.0.5/docs",previous:{title:"Handling Slack Events",permalink:"/docs/1.0.5/channel-slack-handling-events"},next:{title:"Handling Telegram Events",permalink:"/docs/1.0.5/channel-telegram-handling-events"}},c=[{value:"Enable Telegram Channel",id:"enable-telegram-channel",children:[{value:"Create a New Telegram Bottender App",id:"create-a-new-telegram-bottender-app",children:[],level:3},{value:"Enable Telegram Channel for Existing Bottender Apps",id:"enable-telegram-channel-for-existing-bottender-apps",children:[],level:3}],level:2},{value:"Complete Telegram Channel Settings",id:"complete-telegram-channel-settings",children:[{value:"Telegram Access Token",id:"telegram-access-token",children:[],level:3},{value:"Webhook",id:"webhook",children:[{value:"Set Up Webhook for Development",id:"set-up-webhook-for-development",children:[],level:4},{value:"Set Up Webhook for Production",id:"set-up-webhook-for-production",children:[],level:4}],level:3}],level:2}],u={toc:c};function m(e){var t=e.components,n=(0,o.Z)(e,l);return(0,a.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/h5Mg8gNp8vk",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}),(0,a.kt)("br",null),(0,a.kt)("p",null,"\u261d\ufe0fBy Bottender, you can begin your first Telegram Bot in 3 mins!!"),(0,a.kt)("h2",{id:"enable-telegram-channel"},"Enable Telegram Channel"),(0,a.kt)("h3",{id:"create-a-new-telegram-bottender-app"},"Create a New Telegram Bottender App"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Create Bottender App")," is the best way to start building a new application in Bottender."),(0,a.kt)("p",null,"To create a project, run:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"npx create-bottender-app my-app\n")),(0,a.kt)("p",null,"Make sure that the ",(0,a.kt)("inlineCode",{parentName:"p"},"telegram")," option is checked:"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/3382565/67851226-f2b7f200-fb44-11e9-951d-c0050db88ed3.png",alt:null})),(0,a.kt)("p",null,"After finishing the ",(0,a.kt)("inlineCode",{parentName:"p"},"Create Bottender App")," process, you will see the config file ",(0,a.kt)("inlineCode",{parentName:"p"},"bottender.config.js")," generated automatically for further channel settings."),(0,a.kt)("h3",{id:"enable-telegram-channel-for-existing-bottender-apps"},"Enable Telegram Channel for Existing Bottender Apps"),(0,a.kt)("p",null,"First, you need to have a ",(0,a.kt)("inlineCode",{parentName:"p"},"bottender.config.js")," file which sets ",(0,a.kt)("inlineCode",{parentName:"p"},"channels.telegram.enabled")," as ",(0,a.kt)("inlineCode",{parentName:"p"},"true"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n  channels: {\n    telegram: {\n      enabled: true,\n      path: '/webhooks/telegram',\n      accessToken: process.env.TELEGRAM_ACCESS_TOKEN,\n    },\n  },\n};\n")),(0,a.kt)("p",null,"The default webhook path is ",(0,a.kt)("inlineCode",{parentName:"p"},"/webhooks/telegram"),". You can set your webhook path in the ",(0,a.kt)("inlineCode",{parentName:"p"},"path")," field."),(0,a.kt)("h2",{id:"complete-telegram-channel-settings"},"Complete Telegram Channel Settings"),(0,a.kt)("p",null,"To make Telegram bots work, you have to set up:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Telegram Access Token"),(0,a.kt)("li",{parentName:"ul"},"Webhook")),(0,a.kt)("h3",{id:"telegram-access-token"},"Telegram Access Token"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bottender.config.js")," looks up ",(0,a.kt)("inlineCode",{parentName:"p"},".env")," for Telegram access token, which is generated by sending ",(0,a.kt)("inlineCode",{parentName:"p"},"/newbot")," to ",(0,a.kt)("a",{parentName:"p",href:"https://t.me/BotFather"},"@BotFather")," on Telegram. Meanwhile, you get a Telegram Bot account from @Botfather."),(0,a.kt)("p",null,(0,a.kt)("img",{width:"800px",src:"https://user-images.githubusercontent.com/662387/71246889-9312e180-2352-11ea-97da-9a5adc014fda.png"})),(0,a.kt)("p",null,"Then, paste your Telegram bot token to the following field in ",(0,a.kt)("inlineCode",{parentName:"p"},".env"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"TELEGRAM_ACCESS_TOKEN=\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("strong",{parentName:"p"},"Note:")),(0,a.kt)("ul",{parentName:"blockquote"},(0,a.kt)("li",{parentName:"ul"},"BotFather is a super elegant mechanism to create/edit/delete your bots. You don't even need to apply for a developer account or permission to send messages."),(0,a.kt)("li",{parentName:"ul"},"Keep your token secure and store it safely; it can be used by anyone to control your bot. When you have to generate a new access token, you can send ",(0,a.kt)("inlineCode",{parentName:"li"},"/revoke")," to BotFather."),(0,a.kt)("li",{parentName:"ul"},"For more info, please refer to Telegram's official doc, ",(0,a.kt)("a",{parentName:"li",href:"https://core.telegram.org/bots#6-botfather"},"BotFather"),"."))),(0,a.kt)("h3",{id:"webhook"},"Webhook"),(0,a.kt)("h4",{id:"set-up-webhook-for-development"},"Set Up Webhook for Development"),(0,a.kt)("p",null,"Before setting the webhook, please make sure you have set your access token correctly in ",(0,a.kt)("inlineCode",{parentName:"p"},".env"),"."),(0,a.kt)("p",null,"By the following command, Bottender runs a bot server by ngrok, which makes your local bot server accessible from the Internet:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"# in development\nnpm run dev\n")),(0,a.kt)("p",null,"When you run bottender in development mode, Bottender automatically run up a Ngrok client, and then you can get the information of webhook URL from the console like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"App has started\ntelegram webhook url: https://42bbf602.ngrok.io/webhooks/telegram\nserver is running on 5000 port...\n")),(0,a.kt)("p",null,"Then, you can open a new tab in the terminal and finish the webhook setting by the below command:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"npx bottender telegram webhook set\n")),(0,a.kt)("p",null,"Finally, press ",(0,a.kt)("inlineCode",{parentName:"p"},"Y")," to allow Bottender set ",(0,a.kt)("inlineCode",{parentName:"p"},"ngrok")," temporary URL as the webhook. Now you are ready to interact with your bot on Telegram :)"),(0,a.kt)("h4",{id:"set-up-webhook-for-production"},"Set Up Webhook for Production"),(0,a.kt)("p",null,"Before setting the webhook, please make sure you have set your access token correctly as the environment variable."),(0,a.kt)("p",null,"Then, you can run Bottender on your hosting by the following command:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"# in production\nnpm start\n")),(0,a.kt)("p",null,"By the following command, you can finish the Telegram webhook setting. (If you deployed your bot with the default webhook setting, you webhook for Telegram bot supposed to be ",(0,a.kt)("inlineCode",{parentName:"p"},"https://example.com/webhooks/telegram")," )"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"npx bottender telegram webhook set -w https://example.com/webhooks/telegram\n")),(0,a.kt)("p",null,"Now you are ready to interact with your bot on Telegram :)"))}m.isMDXComponent=!0}}]);