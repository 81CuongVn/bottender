"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[92928],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>b});var n=r(67294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var u=n.createContext({}),l=function(e){var t=n.useContext(u),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=l(e.components);return n.createElement(u.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,s=e.originalType,u=e.parentName,c=a(e,["components","mdxType","originalType","parentName"]),p=l(r),b=o,m=p["".concat(u,".").concat(b)]||p[b]||d[b]||s;return r?n.createElement(m,i(i({ref:t},c),{},{components:r})):n.createElement(m,i({ref:t},c))}));function b(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var s=r.length,i=new Array(s);i[0]=p;var a={};for(var u in t)hasOwnProperty.call(t,u)&&(a[u]=t[u]);a.originalType=e,a.mdxType="string"==typeof e?e:o,i[1]=a;for(var l=2;l<s;l++)i[l]=r[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}p.displayName="MDXCreateElement"},36117:(e,t,r)=>{r.r(t),r.d(t,{frontMatter:()=>a,contentTitle:()=>u,metadata:()=>l,toc:()=>c,default:()=>p});var n=r(87462),o=r(63366),s=(r(67294),r(3905)),i=["components"],a={id:"troubleshooting",title:"Troubleshooting",original_id:"troubleshooting"},u=void 0,l={unversionedId:"troubleshooting",id:"version-0.15.17/troubleshooting",isDocsHomePage:!1,title:"Troubleshooting",description:"General",source:"@site/versioned_docs/version-0.15.17/Guides-Troubleshooting.md",sourceDirName:".",slug:"/troubleshooting",permalink:"/docs/0.15.17/troubleshooting",editUrl:"https://github.com/Yoctol/bottender/edit/master/docs/versioned_docs/version-0.15.17/Guides-Troubleshooting.md",tags:[],version:"0.15.17",lastUpdatedBy:"\u5433\u6771\u66c4 Wu, Dung-Ie",lastUpdatedAt:1636542901,formattedLastUpdatedAt:"11/10/2021",frontMatter:{id:"troubleshooting",title:"Troubleshooting",original_id:"troubleshooting"},sidebar:"version-0.15.17/docs",previous:{title:"CustomConnector",permalink:"/docs/0.15.17/custom-connector"}},c=[{value:"General",id:"general",children:[{value:"I want to know if there&#39;re incoming requests to my bot.",id:"i-want-to-know-if-therere-incoming-requests-to-my-bot",children:[],level:3},{value:"All possible DEBUG keys",id:"all-possible-debug-keys",children:[],level:3}],level:2},{value:"Messenger",id:"messenger",children:[{value:"My bot keeps spamming with no error log until server stops.",id:"my-bot-keeps-spamming-with-no-error-log-until-server-stops",children:[],level:3},{value:"I can&#39;t receive persistent menu or get started button events.",id:"i-cant-receive-persistent-menu-or-get-started-button-events",children:[{value:"Make sure you have subscribed to correct events.",id:"make-sure-you-have-subscribed-to-correct-events",children:[],level:4},{value:"Make sure the persistent menu or get started button is created by you current Facebook App.",id:"make-sure-the-persistent-menu-or-get-started-button-is-created-by-you-current-facebook-app",children:[],level:4}],level:3}],level:2}],d={toc:c};function p(e){var t=e.components,r=(0,o.Z)(e,i);return(0,s.kt)("wrapper",(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h2",{id:"general"},"General"),(0,s.kt)("h3",{id:"i-want-to-know-if-therere-incoming-requests-to-my-bot"},"I want to know if there're incoming requests to my bot."),(0,s.kt)("p",null,"To show every incoming request, simply set your ",(0,s.kt)("inlineCode",{parentName:"p"},"DEBUG")," environment variable to ",(0,s.kt)("inlineCode",{parentName:"p"},"bottender:request")," when you start the bot server. You will get something like below when new requests come."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},'$ DEBUG=bottender:request npm start\nserver is running on 5000 port...\n\n  bottender:request {\n  bottender:request   "object": "page",\n  bottender:request   "entry": [\n  bottender:request     {\n  bottender:request       "id": "000000000000000",\n  bottender:request       "time": 1516089458463,\n  bottender:request       "messaging": [\n  bottender:request         {\n  bottender:request           "sender": {\n  bottender:request             "id": "0000000000000000"\n  bottender:request           },\n  bottender:request           "recipient": {\n  bottender:request             "id": "000000000000000"\n  bottender:request           },\n  bottender:request           "timestamp": 1516089458006,\n  bottender:request           "message": {\n  bottender:request             "mid": "mid.$cAALZpXYlSS1nLz6FVlg_00000000",\n  bottender:request             "seq": 119080,\n  bottender:request             "text": "Hi",\n  bottender:request             "nlp": {\n  bottender:request               "entities": {}\n  bottender:request             }\n  bottender:request           }\n  bottender:request         }\n  bottender:request       ]\n  bottender:request     }\n  bottender:request   ]\n  bottender:request } +0ms\n')),(0,s.kt)("h3",{id:"all-possible-debug-keys"},"All possible DEBUG keys"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"bottender:request")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"bottender:session:read")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"bottender:session:write")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"bottender:context"))),(0,s.kt)("h2",{id:"messenger"},"Messenger"),(0,s.kt)("h3",{id:"my-bot-keeps-spamming-with-no-error-log-until-server-stops"},"My bot keeps spamming with no error log until server stops."),(0,s.kt)("p",null,"It could be that you have subscribed to ",(0,s.kt)("inlineCode",{parentName:"p"},"message_echoes")," events and not filtering them out. Check ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/Yoctol/bottender/issues/134"},"this issue")," for more information."),(0,s.kt)("h3",{id:"i-cant-receive-persistent-menu-or-get-started-button-events"},"I can't receive persistent menu or get started button events."),(0,s.kt)("h4",{id:"make-sure-you-have-subscribed-to-correct-events"},"Make sure you have subscribed to correct events."),(0,s.kt)("p",null,"You have to check to subscribe ",(0,s.kt)("inlineCode",{parentName:"p"},"messaging_postbacks")," events in the ",(0,s.kt)("inlineCode",{parentName:"p"},"Messenger")," tab, ",(0,s.kt)("inlineCode",{parentName:"p"},"Webhooks")," block of your Facebook App at ",(0,s.kt)("a",{parentName:"p",href:"https://developers.facebook.com/"},"Facebook for Developers"),"."),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/1003146/34977945-88a32732-fad7-11e7-8896-70a88cb6dfd1.PNG",alt:"check messaging_postbacks"})),(0,s.kt)("h4",{id:"make-sure-the-persistent-menu-or-get-started-button-is-created-by-you-current-facebook-app"},"Make sure the persistent menu or get started button is created by you current Facebook App."),(0,s.kt)("p",null,"If your page was previously connected to other bot services and they created persistent menu or get started button for your page, you can not receive the events. You have to recreate new persistent menu or get started button to make them functioning to the new Facebook App."))}p.isMDXComponent=!0}}]);