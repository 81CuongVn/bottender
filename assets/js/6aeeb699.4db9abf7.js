"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[20542],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(n),m=a,h=u["".concat(s,".").concat(m)]||u[m]||d[m]||o;return n?r.createElement(h,i(i({ref:t},p),{},{components:n})):r.createElement(h,i({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},84643:(e,t,n)=>{n.r(t),n.d(t,{frontMatter:()=>l,contentTitle:()=>s,metadata:()=>c,toc:()=>p,default:()=>u});var r=n(87462),a=n(63366),o=(n(67294),n(3905)),i=["components"],l={id:"intents",title:"Intents",original_id:"intents"},s=void 0,c={unversionedId:"intents",id:"version-0.15.17/intents",isDocsHomePage:!1,title:"Intents",description:"Events",source:"@site/versioned_docs/version-0.15.17/Guides-Intents.md",sourceDirName:".",slug:"/intents",permalink:"/docs/0.15.17/intents",editUrl:"https://github.com/Yoctol/bottender/edit/master/docs/versioned_docs/version-0.15.17/Guides-Intents.md",tags:[],version:"0.15.17",lastUpdatedBy:"\u5433\u6771\u66c4 Wu, Dung-Ie",lastUpdatedAt:1636542901,formattedLastUpdatedAt:"11/10/2021",frontMatter:{id:"intents",title:"Intents",original_id:"intents"},sidebar:"version-0.15.17/docs",previous:{title:"Error Handling",permalink:"/docs/0.15.17/error-handling"},next:{title:"Middleware",permalink:"/docs/0.15.17/middleware"}},p=[{value:"Events",id:"events",children:[],level:2},{value:"Pattern Matching",id:"pattern-matching",children:[{value:"String Comparison",id:"string-comparison",children:[],level:3},{value:"Regular Expression",id:"regular-expression",children:[],level:3}],level:2},{value:"Leverage NLU Technologies",id:"leverage-nlu-technologies",children:[],level:2}],d={toc:p};function u(e){var t=e.components,n=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"events"},"Events"),(0,o.kt)("p",null,"Every time when there is an incoming request, the ",(0,o.kt)("a",{parentName:"p",href:"api-handler"},"handler")," will be called and parse out events from the request. Afterwards, the Event instance is attached to ",(0,o.kt)("a",{parentName:"p",href:"api-context"},"context")," so that you can access it via ",(0,o.kt)("inlineCode",{parentName:"p"},"context.event"),".\nBottender help you recognize what kind of messages or payloads are sent from users. In this way, you are able to handle intents more easily."),(0,o.kt)("p",null,"Check ",(0,o.kt)("a",{parentName:"p",href:"api-event"},"Event Reference")," to get more information about event."),(0,o.kt)("h2",{id:"pattern-matching"},"Pattern Matching"),(0,o.kt)("h3",{id:"string-comparison"},"String Comparison"),(0,o.kt)("p",null,"Here's an example handler which only handles specific commands:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"bot.onEvent(async (context) => {\n  if (context.event.isText) {\n    switch (context.event.text) {\n      case '/start':\n        await context.sendText('Running....');\n        break;\n      case '/help':\n        await context.sendText(`\n/start   start to run\n/help    quick help on <command>\n        `);\n        break;\n      default:\n        await context.sendText(`${context.event.text} is not a valid command.`);\n    }\n  }\n});\n")),(0,o.kt)("h3",{id:"regular-expression"},"Regular Expression"),(0,o.kt)("p",null,"Exactly matching looks a little rigid. Consider using some equality operators to determine whether receiving greeting words or not:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"bot.onEvent(async (context) => {\n  if (context.event.isText) {\n    const { text } = context.event.message;\n    if (text === 'hello' || text === 'hi') {\n      // ...\n    }\n  }\n});\n")),(0,o.kt)("p",null,"It only matches ",(0,o.kt)("inlineCode",{parentName:"p"},"hello")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"hi"),". Neither ",(0,o.kt)("inlineCode",{parentName:"p"},"Hello")," nor ",(0,o.kt)("inlineCode",{parentName:"p"},"hi~")," would work in the above example."),(0,o.kt)("p",null,"We can use ",(0,o.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp"},"regular expressions")," for more general pattern matching. It will be helpful when building rule-based logic."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"bot.onEvent(async (context) => {\n  if (context.event.isText) {\n    const { text } = context.event.message;\n    if (/^h(ello|i)/i.test(text)) {\n      // ...\n    }\n  }\n});\n")),(0,o.kt)("p",null,"Now, not only ",(0,o.kt)("inlineCode",{parentName:"p"},"hello"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"hi")," but also ",(0,o.kt)("inlineCode",{parentName:"p"},"Hello"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"hi~")," will be matched."),(0,o.kt)("h2",{id:"leverage-nlu-technologies"},"Leverage NLU Technologies"),(0,o.kt)("p",null,"If you want to have more general intent recognition, you can leverage modern NLU (Natural Language Understanding) technologies. They can help you recognize the intent of user input sentences. There are several online services you can choose from, for example:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://www.luis.ai/"},"LUIS.ai")," from Microsoft"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://dialogflow.com/"},"Dialogflow")," (formerly api.ai) from Google"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://wit.ai/"},"wit.ai")," from Facebook"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://www.ibm.com/watson/"},"Watson")," from IBM")))}u.isMDXComponent=!0}}]);