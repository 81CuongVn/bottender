"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[68301],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>d});var i=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=i.createContext({}),p=function(e){var t=i.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},l=function(e){var t=p(e.components);return i.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},h=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),h=p(n),d=r,m=h["".concat(c,".").concat(d)]||h[d]||u[d]||a;return n?i.createElement(m,o(o({ref:t},l),{},{components:n})):i.createElement(m,o({ref:t},l))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,o=new Array(a);o[0]=h;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var p=2;p<a;p++)o[p]=n[p];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}h.displayName="MDXCreateElement"},95094:(e,t,n)=>{n.r(t),n.d(t,{frontMatter:()=>s,contentTitle:()=>c,metadata:()=>p,toc:()=>l,default:()=>h});var i=n(87462),r=n(63366),a=(n(67294),n(3905)),o=["components"],s={id:"the-basics-chain",title:"Chain of Responsibility",original_id:"the-basics-chain"},c=void 0,p={unversionedId:"the-basics-chain",id:"version-1.5/the-basics-chain",isDocsHomePage:!1,title:"Chain of Responsibility",description:"Using the Chain of Responsibility pattern is another way to organize your Bottender actions in your Bottender app. This pattern lets you explicitly prioritize your actions by specifying the order of the actions.",source:"@site/versioned_docs/version-1.5/the-basics-chain.md",sourceDirName:".",slug:"/the-basics-chain",permalink:"/docs/the-basics-chain",editUrl:"https://github.com/Yoctol/bottender/edit/master/docs/versioned_docs/version-1.5/the-basics-chain.md",tags:[],version:"1.5",lastUpdatedBy:"\u5433\u6771\u66c4 Wu, Dung-Ie",lastUpdatedAt:1636542901,formattedLastUpdatedAt:"11/10/2021",frontMatter:{id:"the-basics-chain",title:"Chain of Responsibility",original_id:"the-basics-chain"},sidebar:"version-1.5/docs",previous:{title:"Routing",permalink:"/docs/the-basics-routing"},next:{title:"Session",permalink:"/docs/the-basics-session"}},l=[{value:"Using with Router",id:"using-with-router",children:[],level:2}],u={toc:l};function h(e){var t=e.components,n=(0,r.Z)(e,o);return(0,a.kt)("wrapper",(0,i.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Using the ",(0,a.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Chain-of-responsibility_pattern"},"Chain of Responsibility")," pattern is another way to organize your ",(0,a.kt)("a",{parentName:"p",href:"/docs/the-basics-actions"},"Bottender actions")," in your Bottender app. This pattern lets you explicitly prioritize your actions by specifying the order of the actions."),(0,a.kt)("p",null,"Considering a customer service bot app with three very different layers:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"RuleBased"),": Use JavaScript rules to handle incoming events."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"MachineLearning"),": Use machine learning models to handle incoming events."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"HumanAgent"),": Use human agents to handle incoming events.")),(0,a.kt)("p",null,"In general, you may want to put the cheapest layer at the top of the chain. For example, you may put the ",(0,a.kt)("inlineCode",{parentName:"p"},"RuleBased")," action at the top:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const { chain } = require('bottender');\n\nfunction RuleBased(context, props) {\n  if (context.event.text === 'hi') {\n    // discontinue and return the `SayHi` action\n    return SayHi;\n  }\n  // continue to the `next` action\n  return props.next;\n}\n\nfunction MachineLearningBased(context, props) {\n  /* ...skip */\n}\n\nfunction HumanAgent(context, props) {\n  /* ...skip */\n}\n\nfunction App() {\n  return chain([\n    // execute in the following order\n    RuleBased,\n    MachineLearningBased,\n    HumanAgent,\n  ]);\n}\n")),(0,a.kt)("p",null,'If your bot receives a "hi" text message, the ',(0,a.kt)("inlineCode",{parentName:"p"},"RuleBased")," action returns the ",(0,a.kt)("inlineCode",{parentName:"p"},"SayHi")," action and exits the chain. Otherwise, the ",(0,a.kt)("inlineCode",{parentName:"p"},"RuleBased")," action returns ",(0,a.kt)("inlineCode",{parentName:"p"},"props.next")," and goes down to the ",(0,a.kt)("inlineCode",{parentName:"p"},"MachineLearningBased")," action."),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"chain")," function takes an array of actions and returns an action as the return value, so it can work with all patterns that compatible with the Bottender actions."),(0,a.kt)("h2",{id:"using-with-router"},"Using with Router"),(0,a.kt)("p",null,"You can use the Chain of Responsibility pattern with the ",(0,a.kt)("a",{parentName:"p",href:"/docs/the-basics-routing"},"routing mechanism")," that Bottender provides. For example, you may use the ",(0,a.kt)("inlineCode",{parentName:"p"},"router")," function to create a router within the ",(0,a.kt)("inlineCode",{parentName:"p"},"RuleBased")," layer:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function RuleBased(context, { next }) {\n  return router([\n    // return the `SayHi` action when receiving a \"hi\" text message\n    text('hi', SayHi),\n    // return the `next` action\n    route('*', next),\n  ]);\n}\n\nfunction App() {\n  return chain([\n    // execute in the following order\n    RuleBased,\n    MachineLearningBased,\n    HumanAgent,\n  ]);\n}\n")))}h.isMDXComponent=!0}}]);