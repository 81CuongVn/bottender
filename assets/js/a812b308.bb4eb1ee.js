"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[85279],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>g});var r=n(67294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var l=r.createContext({}),p=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,s=e.mdxType,a=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(n),g=s,d=u["".concat(l,".").concat(g)]||u[g]||m[g]||a;return n?r.createElement(d,o(o({ref:t},c),{},{components:n})):r.createElement(d,o({ref:t},c))}));function g(e,t){var n=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var a=n.length,o=new Array(a);o[0]=u;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:s,o[1]=i;for(var p=2;p<a;p++)o[p]=n[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},7113:(e,t,n)=>{n.r(t),n.d(t,{frontMatter:()=>i,contentTitle:()=>l,metadata:()=>p,toc:()=>c,default:()=>u});var r=n(87462),s=n(63366),a=(n(67294),n(3905)),o=["components"],i={id:"channel-messenger-profile",title:"Messenger Profile",original_id:"channel-messenger-profile"},l=void 0,p={unversionedId:"channel-messenger-profile",id:"version-1.5/channel-messenger-profile",isDocsHomePage:!1,title:"Messenger Profile",description:"Introduction",source:"@site/versioned_docs/version-1.5/channel-messenger-profile.md",sourceDirName:".",slug:"/channel-messenger-profile",permalink:"/docs/channel-messenger-profile",editUrl:"https://github.com/Yoctol/bottender/edit/master/docs/versioned_docs/version-1.5/channel-messenger-profile.md",tags:[],version:"1.5",lastUpdatedBy:"\u5433\u6771\u66c4 Wu, Dung-Ie",lastUpdatedAt:1636542901,formattedLastUpdatedAt:"11/10/2021",frontMatter:{id:"channel-messenger-profile",title:"Messenger Profile",original_id:"channel-messenger-profile"},sidebar:"version-1.5/docs",previous:{title:"Messenger Routing",permalink:"/docs/channel-messenger-routing"},next:{title:"Messenger Handover Protocol",permalink:"/docs/channel-messenger-handover-protocol"}},c=[{value:"Introduction",id:"introduction",children:[],level:2},{value:"Setting Get Started Button",id:"setting-get-started-button",children:[],level:2},{value:"Setting Persistent Menu",id:"setting-persistent-menu",children:[{value:"Disabling User Input",id:"disabling-user-input",children:[],level:3}],level:2},{value:"Setting Greeting Text",id:"setting-greeting-text",children:[{value:"Greeting Personalization",id:"greeting-personalization",children:[],level:3}],level:2},{value:"Setting Ice Breakers",id:"setting-ice-breakers",children:[],level:2},{value:"Setting Domain Whitelist",id:"setting-domain-whitelist",children:[],level:2}],m={toc:c};function u(e){var t=e.components,n=(0,s.Z)(e,o);return(0,a.kt)("wrapper",(0,r.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"introduction"},"Introduction"),(0,a.kt)("p",null,"The ",(0,a.kt)("a",{parentName:"p",href:"https://developers.facebook.com/docs/messenger-platform/reference/messenger-profile-api/"},"Messenger Profile")," for your Page is where you set properties that define various aspects of the following Messenger Platform features:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/docs/channel-messenger-profile#setting-get-started-button"},"Get Started Button")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/docs/channel-messenger-profile#setting-persistent-menu"},"Persistent Menu")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/docs/channel-messenger-profile#setting-greeting-text"},"Greeting Text")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/docs/channel-messenger-profile#setting-ice-breakers"},"Ice Breakers")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/docs/channel-messenger-profile#setting-domain-whitelist"},"Domain Whitelist")),(0,a.kt)("li",{parentName:"ul"},"Account Linking")),(0,a.kt)("p",null,"All of those settings can be put into ",(0,a.kt)("inlineCode",{parentName:"p"},"channels.messenger.profile")," fields in ",(0,a.kt)("inlineCode",{parentName:"p"},"bottender.config.js"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// bottender.config.js\nmodule.exports = {\n  channels: {\n    messenger: {\n      enabled: true,\n      path: '/webhooks/messenger',\n      pageId: process.env.MESSENGER_PAGE_ID,\n      accessToken: process.env.MESSENGER_ACCESS_TOKEN,\n      appId: process.env.MESSENGER_APP_ID,\n      appSecret: process.env.MESSENGER_APP_SECRET,\n      verifyToken: process.env.MESSENGER_VERIFY_TOKEN,\n      profile: {\n        // ...put your messenger profile setting here\n      },\n    },\n  },\n};\n")),(0,a.kt)("p",null,"After setting environment variables correctly (if not, please check ",(0,a.kt)("a",{parentName:"p",href:"/docs/channel-messenger-setup"},"this")," out first), you may call the ",(0,a.kt)("inlineCode",{parentName:"p"},"messenger profile set")," command to set the profile:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"npx bottender messenger profile set\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("strong",{parentName:"p"},"Note:")," Calls to the Messenger Profile API are limited to ",(0,a.kt)("strong",{parentName:"p"},"10 API calls per 10 minute")," interval. This rate limit is enforced per Page. You could retry it a few minutes later if the rate limit exceeded.")),(0,a.kt)("p",null,"To view all set messenger profile, you may use the ",(0,a.kt)("inlineCode",{parentName:"p"},"messenger profile get")," command:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"npx bottender messenger profile get\n")),(0,a.kt)("h2",{id:"setting-get-started-button"},"Setting Get Started Button"),(0,a.kt)("p",null,"A Page Messenger welcome screen can display a ",(0,a.kt)("a",{parentName:"p",href:"https://developers.facebook.com/docs/messenger-platform/reference/messenger-profile-api/get-started-button"},"Get Started button"),". When this button is tapped, the Messenger Platform will send a ",(0,a.kt)("inlineCode",{parentName:"p"},"messaging_postbacks")," event to your webhook."),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/3382565/68738725-058cf500-0622-11ea-9096-beb372d22f8e.png",alt:null})),(0,a.kt)("p",null,"This can be set by using ",(0,a.kt)("inlineCode",{parentName:"p"},"channels.messenger.profile.getStarted")," fields in ",(0,a.kt)("inlineCode",{parentName:"p"},"bottender.config.js"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// bottender.config.js\nmodule.exports = {\n  channels: {\n    messenger: {\n      // Omission here...\n      profile: {\n        getStarted: {\n          payload: 'GET_STARTED',\n        },\n      },\n    },\n  },\n};\n")),(0,a.kt)("h2",{id:"setting-persistent-menu"},"Setting Persistent Menu"),(0,a.kt)("p",null,"The ",(0,a.kt)("a",{parentName:"p",href:"https://developers.facebook.com/docs/messenger-platform/reference/messenger-profile-api/persistent-menu"},"persistent menu")," can be set for your bot to help people discover and more easily access your functionality throughout the conversation."),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/3382565/68738777-22292d00-0622-11ea-833d-5e873cfd1f46.png",alt:null})),(0,a.kt)("p",null,"This can be set by using ",(0,a.kt)("inlineCode",{parentName:"p"},"channels.messenger.profile.persistentMenu")," fields in ",(0,a.kt)("inlineCode",{parentName:"p"},"bottender.config.js"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// bottender.config.js\nmodule.exports = {\n  channels: {\n    messenger: {\n      // Omission here...\n      profile: {\n        getStarted: {\n          payload: 'GET_STARTED',\n        },\n        persistentMenu: [\n          {\n            locale: 'default',\n            composerInputDisabled: false,\n            callToActions: [\n              {\n                type: 'postback',\n                title: 'Talk to an agent',\n                payload: 'CARE_HELP',\n              },\n              {\n                type: 'postback',\n                title: 'Outfit suggestions',\n                payload: 'CURATION',\n              },\n              {\n                type: 'web_url',\n                title: 'Shop now',\n                url: 'https://www.originalcoastclothing.com/',\n                webviewHeightRatio: 'full',\n              },\n            ],\n          },\n        ],\n      },\n    },\n  },\n};\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("strong",{parentName:"p"},"Note:")," If you use any ",(0,a.kt)("inlineCode",{parentName:"p"},"web_url")," buttons with ",(0,a.kt)("inlineCode",{parentName:"p"},"messengerExtensions")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"true"),", you must set the domain of the URL as a ",(0,a.kt)("a",{parentName:"p",href:"/docs/channel-messenger-profile#setting-domain-whitelist"},"whitelisted domain"),".")),(0,a.kt)("h3",{id:"disabling-user-input"},"Disabling User Input"),(0,a.kt)("p",null,"To disable user input, you may set the ",(0,a.kt)("inlineCode",{parentName:"p"},"composerInputDisabled")," property to ",(0,a.kt)("inlineCode",{parentName:"p"},"true"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"{\n  locale: 'default',\n  composerInputDisabled: true,\n  callToActions: [\n    // Omission here...\n  ],\n}\n")),(0,a.kt)("p",null,"This means your bot can only be interacted with via the persistent menu, postbacks, buttons, and webviews."),(0,a.kt)("h2",{id:"setting-greeting-text"},"Setting Greeting Text"),(0,a.kt)("p",null,"The ",(0,a.kt)("a",{parentName:"p",href:"https://developers.facebook.com/docs/messenger-platform/reference/messenger-profile-api/greeting"},"greeting")," of your bot's Messenger profile lets you specify the greeting message people will see on the welcome screen of your bot. The welcome screen is displayed for people interacting with your bot for the first time."),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/3382565/68740031-273bab80-0625-11ea-806b-b22cfa464d5d.png",alt:null})),(0,a.kt)("p",null,"This can be set by using ",(0,a.kt)("inlineCode",{parentName:"p"},"channels.messenger.profile.greeting")," fields in ",(0,a.kt)("inlineCode",{parentName:"p"},"bottender.config.js"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// bottender.config.js\nmodule.exports = {\n  channels: {\n    messenger: {\n      // Omission here...\n      profile: {\n        greeting: [\n          {\n            locale: 'default',\n            text: 'Hello! Welcome to my bot~ ?',\n          },\n        ],\n      },\n    },\n  },\n};\n")),(0,a.kt)("h3",{id:"greeting-personalization"},"Greeting Personalization"),(0,a.kt)("p",null,"You can personalize the greeting text using the person's name. You can use the following template strings:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"{{user_first_name}}")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"{{user_last_name}}")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"{{user_full_name}}"))),(0,a.kt)("p",null,"For example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"[\n  {\n    locale: 'default',\n    text: 'Hello {{user_first_name}}! Welcome to my bot~ ?',\n  },\n];\n")),(0,a.kt)("h2",{id:"setting-ice-breakers"},"Setting Ice Breakers"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://developers.facebook.com/docs/messenger-platform/reference/messenger-profile-api/ice-breakers"},"Ice Breakers")," provide a way for users to start a conversation with a business with a list of frequently asked questions."),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/3382565/68740032-273bab80-0625-11ea-8341-aaaf95202efb.png",alt:null})),(0,a.kt)("p",null,"This can be set by using ",(0,a.kt)("inlineCode",{parentName:"p"},"channels.messenger.profile.iceBreakers")," fields in ",(0,a.kt)("inlineCode",{parentName:"p"},"bottender.config.js"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// bottender.config.js\nmodule.exports = {\n  channels: {\n    messenger: {\n      // Omission here...\n      profile: {\n        iceBreakers: [\n          {\n            question: '<QUESTION>',\n            payload: '<PAYLOAD>',\n          },\n          {\n            question: '<QUESTION>',\n            payload: '<PAYLOAD>',\n          },\n        ],\n      },\n    },\n  },\n};\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"question")," will be posted on the thread as the user asking the question and ",(0,a.kt)("inlineCode",{parentName:"p"},"payload")," will be returned as a postback webhook event."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("strong",{parentName:"p"},"Note:")," Some of the profile elements like Ice Breakers and Get Started button are incompatible with each other. So when both are set, one will take precedence over the other. Here is the priority from highest to lowest:"),(0,a.kt)("ul",{parentName:"blockquote"},(0,a.kt)("li",{parentName:"ul"},"API Ice Breakers"),(0,a.kt)("li",{parentName:"ul"},"Get Started button"),(0,a.kt)("li",{parentName:"ul"},"Custom Questions set via the Page Inbox UI"))),(0,a.kt)("h2",{id:"setting-domain-whitelist"},"Setting Domain Whitelist"),(0,a.kt)("p",null,"The ",(0,a.kt)("a",{parentName:"p",href:"https://developers.facebook.com/docs/messenger-platform/reference/messenger-profile-api/domain-whitelisting"},"whitelisted domains")," of your bot's Messenger profile specifies a list of third-party domains that are accessible in the Messenger webview for use with the ",(0,a.kt)("strong",{parentName:"p"},"Messenger Extensions SDK"),", the ",(0,a.kt)("strong",{parentName:"p"},"Checkbox Plugin"),", and the ",(0,a.kt)("strong",{parentName:"p"},"Customer Chat Plugin"),"."),(0,a.kt)("p",null,"This can be set by using ",(0,a.kt)("inlineCode",{parentName:"p"},"channels.messenger.profile.whitelistedDomains")," fields in ",(0,a.kt)("inlineCode",{parentName:"p"},"bottender.config.js"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// bottender.config.js\nmodule.exports = {\n  channels: {\n    messenger: {\n      // Omission here...\n      profile: {\n        whitelistedDomains: ['<WHITELISTED_DOMAIN>', '<WHITELISTED_DOMAIN>'],\n      },\n    },\n  },\n};\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("strong",{parentName:"p"},"Note:")," Domains must meet the following requirements to be whitelisted:"),(0,a.kt)("ul",{parentName:"blockquote"},(0,a.kt)("li",{parentName:"ul"},"Served over ",(0,a.kt)("strong",{parentName:"li"},"HTTPS")),(0,a.kt)("li",{parentName:"ul"},"Use a fully qualified domain name, such as ",(0,a.kt)("a",{parentName:"li",href:"https://www.messenger.com/"},"https://www.messenger.com/"),". IP addresses and localhost are not supported for whitelisting."))))}u.isMDXComponent=!0}}]);