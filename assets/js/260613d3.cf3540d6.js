"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[51218],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>d});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var r=a.createContext({}),p=function(e){var t=a.useContext(r),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(r.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,l=e.originalType,r=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),u=p(n),d=i,g=u["".concat(r,".").concat(d)]||u[d]||m[d]||l;return n?a.createElement(g,s(s({ref:t},c),{},{components:n})):a.createElement(g,s({ref:t},c))}));function d(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var l=n.length,s=new Array(l);s[0]=u;var o={};for(var r in t)hasOwnProperty.call(t,r)&&(o[r]=t[r]);o.originalType=e,o.mdxType="string"==typeof e?e:i,s[1]=o;for(var p=2;p<l;p++)s[p]=n[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},37989:(e,t,n)=>{n.r(t),n.d(t,{frontMatter:()=>o,contentTitle:()=>r,metadata:()=>p,toc:()=>c,default:()=>u});var a=n(87462),i=n(63366),l=(n(67294),n(3905)),s=["components"],o={id:"channel-line-sending-messages",title:"Sending LINE Messages",original_id:"channel-line-sending-messages"},r=void 0,p={unversionedId:"channel-line-sending-messages",id:"version-1.5/channel-line-sending-messages",isDocsHomePage:!1,title:"Sending LINE Messages",description:"Reply API and Push API",source:"@site/versioned_docs/version-1.5/channel-line-sending-messages.md",sourceDirName:".",slug:"/channel-line-sending-messages",permalink:"/docs/channel-line-sending-messages",editUrl:"https://github.com/Yoctol/bottender/edit/master/docs/versioned_docs/version-1.5/channel-line-sending-messages.md",tags:[],version:"1.5",lastUpdatedBy:"\u5433\u6771\u66c4 Wu, Dung-Ie",lastUpdatedAt:1636542901,formattedLastUpdatedAt:"11/10/2021",frontMatter:{id:"channel-line-sending-messages",title:"Sending LINE Messages",original_id:"channel-line-sending-messages"},sidebar:"version-1.5/docs",previous:{title:"Handling LINE Events",permalink:"/docs/channel-line-handling-events"},next:{title:"LINE Routing",permalink:"/docs/channel-line-routing"}},c=[{value:"Reply API and Push API",id:"reply-api-and-push-api",children:[],level:2},{value:"Batching Messages",id:"batching-messages",children:[],level:2},{value:"Sending Text Messages",id:"sending-text-messages",children:[{value:"Plain Text",id:"plain-text",children:[],level:3},{value:"Text with LINE emoji",id:"text-with-line-emoji",children:[],level:3}],level:2},{value:"Sending Rich Media Messages",id:"sending-rich-media-messages",children:[{value:"Sticker",id:"sticker",children:[],level:3},{value:"Image",id:"image",children:[],level:3},{value:"Video",id:"video",children:[],level:3},{value:"Audio",id:"audio",children:[],level:3},{value:"Location",id:"location",children:[],level:3},{value:"Imagemap",id:"imagemap",children:[],level:3}],level:2},{value:"Sending Template Messages",id:"sending-template-messages",children:[{value:"Confirm Template",id:"confirm-template",children:[],level:3},{value:"Buttons Template",id:"buttons-template",children:[],level:3},{value:"Carousel Template",id:"carousel-template",children:[],level:3},{value:"Image Carousel Template",id:"image-carousel-template",children:[],level:3}],level:2},{value:"Sending Flex Messages",id:"sending-flex-messages",children:[],level:2},{value:"Sending with Quick Replies",id:"sending-with-quick-replies",children:[{value:"Sending Quick Reply",id:"sending-quick-reply",children:[{value:"Sending Quick Reply with Message",id:"sending-quick-reply-with-message",children:[],level:4},{value:"Sending Quick Reply with Text Message",id:"sending-quick-reply-with-text-message",children:[],level:4},{value:"Sending Quick Reply with Template Message",id:"sending-quick-reply-with-template-message",children:[],level:4},{value:"Sending Quick Reply with Buttons Template Message",id:"sending-quick-reply-with-buttons-template-message",children:[],level:4},{value:"Sending Quick Reply with Confirm Template Message",id:"sending-quick-reply-with-confirm-template-message",children:[],level:4},{value:"Sending Quick Reply with Carousel Template Message",id:"sending-quick-reply-with-carousel-template-message",children:[],level:4},{value:"Sending Quick Reply with Flex Message",id:"sending-quick-reply-with-flex-message",children:[],level:4}],level:3},{value:"Text Quick Reply",id:"text-quick-reply",children:[],level:3},{value:"Postback Quick Replay",id:"postback-quick-replay",children:[],level:3},{value:"URI Quick Reply",id:"uri-quick-reply",children:[],level:3},{value:"Datetime Picker Quick Reply",id:"datetime-picker-quick-reply",children:[],level:3},{value:"Camera Quick Reply",id:"camera-quick-reply",children:[],level:3},{value:"Camera Roll Quick Reply",id:"camera-roll-quick-reply",children:[],level:3},{value:"Location Quick Reply",id:"location-quick-reply",children:[],level:3}],level:2},{value:"Sending Messages with Icon and Display Name",id:"sending-messages-with-icon-and-display-name",children:[],level:2},{value:"Rate Limits",id:"rate-limits",children:[{value:"Send API",id:"send-api",children:[],level:3}],level:2}],m={toc:c};function u(e){var t=e.components,n=(0,i.Z)(e,s);return(0,l.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"reply-api-and-push-api"},"Reply API and Push API"),(0,l.kt)("p",null,"Due to cost concerns, you should clearly understand before sending any messages is the difference between Reply API and Push API:"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/662387/70490029-4cdea680-1b38-11ea-9979-2f9a68cb02cd.png",alt:"messaging-api-thumb0"})),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"Reply API")," is free. However, your bot can only reply to the user once after a user interacts with your LINE official account. For each bot reply, you can send up to 5 ",(0,l.kt)("strong",{parentName:"p"},"message objects")," (See LINE's official document, ",(0,l.kt)("a",{parentName:"p",href:"https://developers.line.biz/en/reference/messaging-api/#send-reply-message"},"Sending Reply Messages"),"). If you attempt to reply with more than 5 message objects, you may see an error in your console.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"Push API")," allows developers to send messages directly to users anytime. However, it might cost some money depends on the pricing plan in your country."))),(0,l.kt)("p",null,"By default, Bottender uses ",(0,l.kt)("strong",{parentName:"p"},"Reply API")," to send messages to users in conversations."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"Note:")," Reply API only works within 30 seconds from a user interacts with your LINE official account.")),(0,l.kt)("h2",{id:"batching-messages"},"Batching Messages"),(0,l.kt)("p",null,"By default, Bottender runs in Batch Mode. Messages to reply are put into the queue and sent to LINE in a single request."),(0,l.kt)("p",null,'To send "hello" and "world" with two messages, you can use one of the following usage:'),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Call ",(0,l.kt)("inlineCode",{parentName:"li"},"context.sendText()")," two times:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"await context.sendText('hello');\nawait context.sendText('world');\n")),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},"Call ",(0,l.kt)("inlineCode",{parentName:"li"},"send()")," with two message objects:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"await context.send([\n  {\n    type: 'text',\n    text: 'hello',\n  },\n  {\n    type: 'text',\n    text: 'world',\n  },\n]);\n")),(0,l.kt)("p",null,"The above two examples are equivalent. However, we recommend using the first usage because of better compatibility with other platforms."),(0,l.kt)("h2",{id:"sending-text-messages"},"Sending Text Messages"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Text message")," is the most frequent and common message types among all chat channels. It also offers a minimal format while carrying out dynamic data, e.g., stock price and weather info."),(0,l.kt)("p",null,(0,l.kt)("img",{width:"300",src:"https://user-images.githubusercontent.com/662387/70680790-38cfac00-1cd4-11ea-88a3-12ed1c71effc.png"})),(0,l.kt)("h3",{id:"plain-text"},"Plain Text"),(0,l.kt)("p",null,"The following example shows how to reply with plain text."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"async function SendHi(context) {\n  await context.sendText('Hi!');\n}\n")),(0,l.kt)("p",null,"For more information, please refer to LINE's official doc, ",(0,l.kt)("a",{parentName:"p",href:"https://developers.line.biz/en/reference/messaging-api/#text-message"},"Text Message"),"."),(0,l.kt)("h3",{id:"text-with-line-emoji"},"Text with LINE emoji"),(0,l.kt)("p",null,"You can include LINE's original emoji (usually involves LINE Friends) in text messages using character code. You can find the list of LINE emoji in ",(0,l.kt)("a",{parentName:"p",href:"https://developers.line.me/media/messaging-api/emoji-list.pdf"},"emoji list"),"."),(0,l.kt)("p",null,(0,l.kt)("img",{width:"300",src:"https://user-images.githubusercontent.com/662387/70680894-82b89200-1cd4-11ea-92e8-53e222bbd12d.png"})),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"async function SendHi(context) {\n  await context.sendText(`${String.fromCodePoint(0x100084)} Hi!`);\n}\n")),(0,l.kt)("h2",{id:"sending-rich-media-messages"},"Sending Rich Media Messages"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Rich Media Messages")," of LINE consist of stickers, images, videos, audios, locations, and imagemaps. Rich Media Messages is useful when your priority is to catch the user's attention, e.g., limited promotion. Plus, it is also handy to create an immersive experience, e.g., telling a story."),(0,l.kt)("h3",{id:"sticker"},"Sticker"),(0,l.kt)("p",null,"By ",(0,l.kt)("strong",{parentName:"p"},"Stickers"),", LINE creates a versatile, communicative language. Stickers make your bot expressive and engaging. To send a sticker, you need to indicate the package ID and sticker ID of the sticker."),(0,l.kt)("p",null,(0,l.kt)("img",{width:"300",src:"https://user-images.githubusercontent.com/662387/70680788-38cfac00-1cd4-11ea-81a7-880abdf1ff45.png"})),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"await context.sendSticker({\n  packageId: '1',\n  stickerId: '1',\n});\n")),(0,l.kt)("p",null,"For more information, please refer to LINE's official doc, ",(0,l.kt)("a",{parentName:"p",href:"https://developers.line.biz/en/reference/messaging-api/#sticker-message"},"Sticker Message"),"."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"Note:")," You can only send LINE's original Stickers. You can find the sticker's package ID and sticker ID in the ",(0,l.kt)("a",{parentName:"p",href:"https://developers.line.biz/media/messaging-api/sticker_list.pdf"},"sticker list"),".")),(0,l.kt)("h3",{id:"image"},"Image"),(0,l.kt)("p",null,"To send an ",(0,l.kt)("strong",{parentName:"p"},"Image"),", you need to prepare URLs of the original image and a smaller preview image. Users can see the preview image in the chat. When the user clicked the preview image, s/he can see the original image."),(0,l.kt)("p",null,(0,l.kt)("img",{width:"300",src:"https://user-images.githubusercontent.com/662387/70680782-379e7f00-1cd4-11ea-8f41-bd18c194a55b.png"})),(0,l.kt)("p",null,"If you want to set up a call to action on the image, you may refer to ",(0,l.kt)("a",{parentName:"p",href:"#imagemap"},"Imagemaps"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"await context.sendImage({\n  originalContentUrl: 'https://example.com/image.jpg',\n  previewImageUrl: 'https://example.com/preview.jpg',\n});\n")),(0,l.kt)("p",null,"For more information, please refer to LINE's official doc, ",(0,l.kt)("a",{parentName:"p",href:"https://developers.line.biz/en/reference/messaging-api/#image-message"},"Image Message"),"."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"Note:")," The URLs must use HTTPS over TLS 1.2 or later.")),(0,l.kt)("h3",{id:"video"},"Video"),(0,l.kt)("p",null,"To send a ",(0,l.kt)("strong",{parentName:"p"},"Video"),", you need to prepare the URL of the video file and the URL of a preview image. The user can play the video by tapping on the preview image."),(0,l.kt)("p",null,(0,l.kt)("img",{width:"300",src:"https://user-images.githubusercontent.com/662387/70680791-38cfac00-1cd4-11ea-8d1f-ea98199ae363.png"})),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"await context.sendVideo({\n  originalContentUrl: 'https://example.com/video.mp4',\n  previewImageUrl: 'https://example.com/preview.jpg',\n});\n")),(0,l.kt)("p",null,"For more information, please refer to LINE's official doc, ",(0,l.kt)("a",{parentName:"p",href:"https://developers.line.biz/en/reference/messaging-api/#video-message"},"Video Message"),"."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"Note:")," The URLs must use HTTPS over TLS 1.2 or later.")),(0,l.kt)("h3",{id:"audio"},"Audio"),(0,l.kt)("p",null,"To send an ",(0,l.kt)("inlineCode",{parentName:"p"},"Audio")," file, you need to prepare the URL of the file and the duration of the audio."),(0,l.kt)("p",null,(0,l.kt)("img",{width:"300",src:"https://user-images.githubusercontent.com/662387/70680776-3705e880-1cd4-11ea-843b-782a95aaa30d.png"})),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"await context.sendAudio({\n  originalContentUrl: 'https://example.com/audio.mp3',\n  duration: 240000,\n});\n")),(0,l.kt)("p",null,"For more information, please refer to LINE's official doc, ",(0,l.kt)("a",{parentName:"p",href:"https://developers.line.biz/en/reference/messaging-api/#audio-message"},"Audio Message"),"."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"Note:")," The URLs must use HTTPS over TLS 1.2 or later.")),(0,l.kt)("h3",{id:"location"},"Location"),(0,l.kt)("p",null,"To send your location information to users, you have to prepare a title, address, and latitude and longitude."),(0,l.kt)("p",null,(0,l.kt)("img",{width:"300",src:"https://user-images.githubusercontent.com/662387/70680786-38371580-1cd4-11ea-9755-e8f335183ebd.png"})),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"await context.sendLocation({\n  title: 'my location',\n  address: '\u3012150-0002 \u6771\u4eac\u90fd\u6e0b\u8c37\u533a\u6e0b\u8c37\uff12\u4e01\u76ee\uff12\uff11\u2212\uff11',\n  latitude: 35.65910807942215,\n  longitude: 139.70372892916203,\n});\n")),(0,l.kt)("p",null,"For more information, please refer to LINE's official doc, ",(0,l.kt)("a",{parentName:"p",href:"https://developers.line.biz/en/reference/messaging-api/#location-message"},"Location Message"),"."),(0,l.kt)("h3",{id:"imagemap"},"Imagemap"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Imagemap")," offers very flexible and interactive usage. It is an image with multiple tappable areas. When a user taps one of these areas, the user can link to a webpage or send a message on their behalf."),(0,l.kt)("p",null,(0,l.kt)("img",{width:"300",src:"https://user-images.githubusercontent.com/662387/70680785-38371580-1cd4-11ea-98ce-c41438379fe8.png"})),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const imagemap = {\n  baseUrl: 'https://example.com/bot/images/rm001',\n  baseSize: {\n    height: 1040,\n    width: 1040,\n  },\n  actions: [\n    {\n      type: 'uri',\n      linkUri: 'https://example.com/',\n      area: {\n        x: 0,\n        y: 0,\n        width: 520,\n        height: 1040,\n      },\n    },\n    {\n      type: 'message',\n      text: 'hello',\n      area: {\n        x: 520,\n        y: 0,\n        width: 520,\n        height: 1040,\n      },\n    },\n  ],\n};\nconst altText = 'this is an imagemap';\nawait context.sendImagemap(altText, imagemap);\n")),(0,l.kt)("p",null,"For more information, please refer to LINE's official doc, ",(0,l.kt)("a",{parentName:"p",href:"https://developers.line.biz/en/reference/messaging-api/#imagemap-message"},"Imagemap Message"),"."),(0,l.kt)("h2",{id:"sending-template-messages"},"Sending Template Messages"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Template message")," is interactive gallery composed of image, video, title, subtitle, and buttons."),(0,l.kt)("p",null,"Template message is the key to offer rich media interaction. It is usually used in the scenario of display multiple choices and next actions to the user, e.g., applying coupons, booking a room, making a reservation."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"Note:"),"\nCompared with Template Message, we highly depend on ",(0,l.kt)("a",{parentName:"p",href:"/docs/channel-line-flex"},"Flex Message")," once it is available. There are two main reasons:"),(0,l.kt)("ul",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ul"},"Flex Message supports both desktop and mobile devices, while Template Message only supports mobile devices."),(0,l.kt)("li",{parentName:"ul"},"Flex Message is an HTML-like chat UI, which creates a better, engaging user experience."))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const template = {\n  type: 'buttons',\n  thumbnailImageUrl: 'https://example.com/bot/images/image.jpg',\n  title: 'Menu',\n  text: 'Please select',\n  actions: [\n    {\n      type: 'postback',\n      label: 'Buy',\n      data: 'action=buy&itemid=123',\n    },\n    {\n      type: 'postback',\n      label: 'Add to cart',\n      data: 'action=add&itemid=123',\n    },\n    {\n      type: 'uri',\n      label: 'View detail',\n      uri: 'http://example.com/page/123',\n    },\n  ],\n};\nconst altText = 'this is a template';\nawait context.sendTemplate(altText, template);\n")),(0,l.kt)("h3",{id:"confirm-template"},"Confirm Template"),(0,l.kt)("p",null,"A ",(0,l.kt)("strong",{parentName:"p"},"Confirm Template")," is designed for confirmation."),(0,l.kt)("p",null,(0,l.kt)("img",{width:"300",src:"https://user-images.githubusercontent.com/662387/70680779-379e7f00-1cd4-11ea-9706-941b6a30e003.png"})),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const template = {\n  text: 'Are you sure?',\n  actions: [\n    {\n      type: 'message',\n      label: 'Yes',\n      text: 'yes',\n    },\n    {\n      type: 'message',\n      label: 'No',\n      text: 'no',\n    },\n  ],\n};\nconst altText = 'this is a confirm template';\nawait context.sendConfirmTemplate(altText, template);\n")),(0,l.kt)("p",null,"For more information, please refer to LINE's official doc, ",(0,l.kt)("a",{parentName:"p",href:"https://developers.line.biz/en/reference/messaging-api/#confirm"},"Confirm Template"),"."),(0,l.kt)("h3",{id:"buttons-template"},"Buttons Template"),(0,l.kt)("p",null,"A ",(0,l.kt)("inlineCode",{parentName:"p"},"Buttons Template")," includes an image, title, text, and multiple action buttons."),(0,l.kt)("p",null,(0,l.kt)("img",{width:"300",src:"https://user-images.githubusercontent.com/662387/70680777-3705e880-1cd4-11ea-896d-c0f53257276c.png"})),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const template = {\n  thumbnailImageUrl: 'https://example.com/bot/images/image.jpg',\n  title: 'Menu',\n  text: 'Please select',\n  actions: [\n    {\n      type: 'postback',\n      label: 'Buy',\n      data: 'action=buy&itemid=123',\n    },\n    {\n      type: 'postback',\n      label: 'Add to cart',\n      data: 'action=add&itemid=123',\n    },\n    {\n      type: 'uri',\n      label: 'View detail',\n      uri: 'http://example.com/page/123',\n    },\n  ],\n};\nconst altText = 'this is a button template';\nawait context.sendButtonTemplate(altText, template);\n")),(0,l.kt)("p",null,"For more information, please refer to LINE's official doc, ",(0,l.kt)("a",{parentName:"p",href:"https://developers.line.biz/en/reference/messaging-api/#buttons"},"Buttons Template"),"."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"Note:")," Depending on the character width, the message text may not fully be displayed due to the height limitation of the text area.")),(0,l.kt)("h3",{id:"carousel-template"},"Carousel Template"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Carousel Template")," is an upgraded version of Buttons Template. For each Buttons Template, you can have an image, title, text, and multiple action buttons."),(0,l.kt)("p",null,"You can have up to 10 Buttons Template in a row to compose a Carousel Template."),(0,l.kt)("p",null,(0,l.kt)("img",{width:"300",src:"https://user-images.githubusercontent.com/662387/70680778-3705e880-1cd4-11ea-8bcd-7e38aa45f74e.png"})),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const template = [\n  {\n    thumbnailImageUrl: 'https://example.com/bot/images/item1.jpg',\n    title: 'this is menu',\n    text: 'description',\n    actions: [\n      {\n        type: 'postback',\n        label: 'Buy',\n        data: 'action=buy&itemid=111',\n      },\n      {\n        type: 'postback',\n        label: 'Add to cart',\n        data: 'action=add&itemid=111',\n      },\n      {\n        type: 'uri',\n        label: 'View detail',\n        uri: 'http://example.com/page/111',\n      },\n    ],\n  },\n  {\n    thumbnailImageUrl: 'https://example.com/bot/images/item2.jpg',\n    title: 'this is menu',\n    text: 'description',\n    actions: [\n      {\n        type: 'postback',\n        label: 'Buy',\n        data: 'action=buy&itemid=222',\n      },\n      {\n        type: 'postback',\n        label: 'Add to cart',\n        data: 'action=add&itemid=222',\n      },\n      {\n        type: 'uri',\n        label: 'View detail',\n        uri: 'http://example.com/page/222',\n      },\n    ],\n  },\n];\nconst altText = 'this is a carousel template';\nawait context.sendCarouselTemplate(altText, template);\n")),(0,l.kt)("p",null,"For more information, please refer to LINE's official doc, ",(0,l.kt)("a",{parentName:"p",href:"https://developers.line.biz/en/reference/messaging-api/#carousel"},"Carousel Template"),"."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"Note:")),(0,l.kt)("ul",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ul"},"Depending on the character width, the message text may not fully be displayed due to the height limitation of the text area."),(0,l.kt)("li",{parentName:"ul"},"You have to keep the number of actions consistent for all columns."))),(0,l.kt)("h3",{id:"image-carousel-template"},"Image Carousel Template"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Image Carousel Template")," has multiple images that can be cycled like a carousel. Users can scroll the images horizontally to browse possible choices. Without the bother of buttons, it helps your user focus on the product images."),(0,l.kt)("p",null,(0,l.kt)("img",{width:"300",src:"https://user-images.githubusercontent.com/662387/70680783-38371580-1cd4-11ea-888e-336a24e67029.png"})),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const template = [\n  {\n    imageUrl: 'https://example.com/bot/images/item1.jpg',\n    action: {\n      type: 'postback',\n      label: 'Buy',\n      data: 'action=buy&itemid=111',\n    },\n  },\n  {\n    imageUrl: 'https://example.com/bot/images/item2.jpg',\n    action: {\n      type: 'message',\n      label: 'Yes',\n      text: 'yes',\n    },\n  },\n  {\n    imageUrl: 'https://example.com/bot/images/item3.jpg',\n    action: {\n      type: 'uri',\n      label: 'View detail',\n      uri: 'http://example.com/page/222',\n    },\n  },\n];\nconst altText = 'this is a image carousel template';\nawait context.sendImageCarouselTemplate(altText, template);\n")),(0,l.kt)("p",null,"For more information, please refer to LINE's official doc, ",(0,l.kt)("a",{parentName:"p",href:"https://developers.line.biz/en/reference/messaging-api/#image-carousel"},"Image Carousel Template"),"."),(0,l.kt)("h2",{id:"sending-flex-messages"},"Sending Flex Messages"),(0,l.kt)("p",null,(0,l.kt)("img",{width:"800",src:"https://user-images.githubusercontent.com/662387/70701503-6bdf6300-1d07-11ea-86d6-924d676a1f80.png"})),(0,l.kt)("p",null,"Since we love ",(0,l.kt)("a",{parentName:"p",href:"/docs/channel-line-flex"},"Flex Message")," and inspired by its flexibility and interactive, we wrote a separate doc, ",(0,l.kt)("a",{parentName:"p",href:"/docs/channel-line-flex"},"Flex Message"),"."),(0,l.kt)("h2",{id:"sending-with-quick-replies"},"Sending with Quick Replies"),(0,l.kt)("p",null,"We would recommend you to treat Quick Reply as an alternative to user text input."),(0,l.kt)("p",null,"When a user receives a message that contains Quick Reply Buttons from a LINE official account, those buttons appear at the bottom of the chat screen. The user can tap one of the buttons as a reply."),(0,l.kt)("p",null,"A Quick Reply consists of up to 13 Quick Reply Buttons. When the user taps a Quick Reply Button, the Quick Reply dismissed. Then, the title of the tapped button posts to the conversation as a response. Meanwhile, the user triggers the action bound with the Quick Reply Button."),(0,l.kt)("p",null,"Quick Reply can be used in a 1 on 1 chat with a LINE official account, a group, and a room."),(0,l.kt)("p",null,(0,l.kt)("img",{width:"300",src:"https://user-images.githubusercontent.com/662387/70680787-38cfac00-1cd4-11ea-92ea-e7a2379ce9c2.png"})),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const quickReply = {\n  items: [\n    {\n      type: 'action',\n      action: {\n        type: 'cameraRoll',\n        label: 'Send photo',\n      },\n    },\n    {\n      type: 'action',\n      action: {\n        type: 'camera',\n        label: 'Open camera',\n      },\n    },\n  ],\n};\n")),(0,l.kt)("p",null,"For more information, please refer to LINE's official doc, ",(0,l.kt)("a",{parentName:"p",href:"https://developers.line.biz/en/docs/messaging-api/using-quick-reply/"},"Using Quick Reply"),"."),(0,l.kt)("h3",{id:"sending-quick-reply"},"Sending Quick Reply"),(0,l.kt)("p",null,"Since Quick Reply works as an alternative of user input, you have to send Quick Reply as an attachment of other messages, e.g., Text Message, Template Message, or Flex."),(0,l.kt)("h4",{id:"sending-quick-reply-with-message"},"Sending Quick Reply with Message"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"await context.send([\n  {\n    type: 'text',\n    text: 'hello',\n    quickReply,\n  },\n]);\n")),(0,l.kt)("h4",{id:"sending-quick-reply-with-text-message"},"Sending Quick Reply with Text Message"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"await context.sendText('hello', { quickReply });\n")),(0,l.kt)("h4",{id:"sending-quick-reply-with-template-message"},"Sending Quick Reply with Template Message"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"await context.sendTemplate(altText, template, { quickReply });\n")),(0,l.kt)("h4",{id:"sending-quick-reply-with-buttons-template-message"},"Sending Quick Reply with Buttons Template Message"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"await context.sendButtonTemplate(altText, template, { quickReply });\n")),(0,l.kt)("h4",{id:"sending-quick-reply-with-confirm-template-message"},"Sending Quick Reply with Confirm Template Message"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"await context.sendConfirmTemplate(altText, template, { quickReply });\n")),(0,l.kt)("h4",{id:"sending-quick-reply-with-carousel-template-message"},"Sending Quick Reply with Carousel Template Message"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"await context.sendCarouselTemplate(altText, template, { quickReply });\n")),(0,l.kt)("h4",{id:"sending-quick-reply-with-flex-message"},"Sending Quick Reply with Flex Message"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"await context.sendFlex(altText, contents, { quickReply });\n")),(0,l.kt)("p",null,"In the following sections, you can see various types of Quick Reply."),(0,l.kt)("h3",{id:"text-quick-reply"},"Text Quick Reply"),(0,l.kt)("p",null,"When this action is tapped, the string in the text property is sent as a message from the user."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const quickReply = {\n  items: [\n    {\n      type: 'action',\n      action: {\n        type: 'message',\n        label: 'Yes',\n        text: 'Yes',\n      },\n    },\n  ],\n};\n")),(0,l.kt)("p",null,"For more information, please refer to LINE's official doc, ",(0,l.kt)("a",{parentName:"p",href:"https://developers.line.biz/en/reference/messaging-api/#message-action"},"Message Actions"),"."),(0,l.kt)("h3",{id:"postback-quick-replay"},"Postback Quick Replay"),(0,l.kt)("p",null,"When the action is tapped, a postback event is returned via webhook with the specified string in the data property."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const quickReply = {\n  items: [\n    {\n      type: 'action',\n      action: {\n        type: 'postback',\n        label: 'Buy',\n        data: 'action=buy&itemid=111',\n        text: 'Buy',\n      },\n    },\n  ],\n};\n")),(0,l.kt)("p",null,"For more information, please refer to LINE's official doc, ",(0,l.kt)("a",{parentName:"p",href:"https://developers.line.biz/en/reference/messaging-api/#postback-action"},"Postback Actions"),"."),(0,l.kt)("h3",{id:"uri-quick-reply"},"URI Quick Reply"),(0,l.kt)("p",null,"The URI opened when the action is performed. The available schemes for URI are ",(0,l.kt)("inlineCode",{parentName:"p"},"http"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"https"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"line"),", and ",(0,l.kt)("inlineCode",{parentName:"p"},"tel"),". For the LINE URL scheme, you can trigger the following actions:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Opening the camera and camera roll"),(0,l.kt)("li",{parentName:"ul"},"Opening the location screen"),(0,l.kt)("li",{parentName:"ul"},"Sharing your LINE official account"),(0,l.kt)("li",{parentName:"ul"},"Opening your LINE official account's Timeline and account page"),(0,l.kt)("li",{parentName:"ul"},"Sending text messages"),(0,l.kt)("li",{parentName:"ul"},"Opening profile information"),(0,l.kt)("li",{parentName:"ul"},"Opening common LINE screens"),(0,l.kt)("li",{parentName:"ul"},"Opening LINE settings screens"),(0,l.kt)("li",{parentName:"ul"},"Opening the Sticker Shop"),(0,l.kt)("li",{parentName:"ul"},"Opening the Theme Shop"),(0,l.kt)("li",{parentName:"ul"},"Making phone calls with LINE Out"),(0,l.kt)("li",{parentName:"ul"},"Opening a LIFF app")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const quickReply = {\n  items: [\n    {\n      type: 'action',\n      action: {\n        type: 'uri',\n        label: 'View details',\n        uri: 'http://example.com/page/222',\n        altUri: {\n          desktop: 'http://example.com/pc/page/222',\n        },\n      },\n    },\n  ],\n};\n")),(0,l.kt)("p",null,"For more information, please refer to LINE's official doc, ",(0,l.kt)("a",{parentName:"p",href:"https://developers.line.biz/en/reference/messaging-api/#uri-action"},"URI Actions"),"."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"Note:")),(0,l.kt)("ul",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ul"},"The ",(0,l.kt)("inlineCode",{parentName:"li"},"altUri.desktop")," property is supported only when you set URI actions in Flex Messages."),(0,l.kt)("li",{parentName:"ul"},"For more information about the LINE URL scheme, see Using the ",(0,l.kt)("a",{parentName:"li",href:"https://developers.line.biz/en/docs/line-login/using-line-url-scheme/"},"LINE URL Scheme"),"."))),(0,l.kt)("h3",{id:"datetime-picker-quick-reply"},"Datetime Picker Quick Reply"),(0,l.kt)("p",null,"When a control associated with this action is tapped, a postback event is returned via webhook with the date and time selected by the user from the date and time selection dialog. The ",(0,l.kt)("inlineCode",{parentName:"p"},"Datetime Picker")," action does not support time zones."),(0,l.kt)("p",null,"There are three different modes:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"date: Pick a date"),(0,l.kt)("li",{parentName:"ul"},"time: Pick time"),(0,l.kt)("li",{parentName:"ul"},"datetime: Pick date and time")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const quickReply = {\n  items: [\n    {\n      type: 'datetimepicker',\n      label: 'Select date',\n      data: 'storeId=12345',\n      mode: 'datetime',\n      initial: '2017-12-25t00:00',\n      max: '2018-01-24t23:59',\n      min: '2017-12-25t00:00',\n    },\n  ],\n};\n")),(0,l.kt)("p",null,"For more information, please refer to LINE's official doc, ",(0,l.kt)("a",{parentName:"p",href:"https://developers.line.biz/en/reference/messaging-api/#datetime-picker-action"},"Datatime Picker Actions"),"."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"Note:")," The datetime picker action is only supported on versions equal to or later than LINE 7.9.0 for iOS and LINE 7.12.0 for Android.")),(0,l.kt)("h3",{id:"camera-quick-reply"},"Camera Quick Reply"),(0,l.kt)("p",null,"This action can be configured only with quick reply buttons. When a button associated with this action is tapped, the camera screen in LINE is opened."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const quickReply = {\n  items: [\n    {\n      type: 'action',\n      action: {\n        type: 'camera',\n        label: 'Camera',\n      },\n    },\n  ],\n};\n")),(0,l.kt)("p",null,"For more information, please refer to LINE's official doc, ",(0,l.kt)("a",{parentName:"p",href:"https://developers.line.biz/en/reference/messaging-api/#camera-action"},"Camera Actions"),"."),(0,l.kt)("h3",{id:"camera-roll-quick-reply"},"Camera Roll Quick Reply"),(0,l.kt)("p",null,"This action can be configured only with quick reply buttons. When a button associated with this action is tapped, the camera roll screen in LINE is opened."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const quickReply = {\n  items: [\n    {\n      type: 'action',\n      action: {\n        type: 'cameraRoll',\n        label: 'Camera roll',\n      },\n    },\n  ],\n};\n")),(0,l.kt)("p",null,"For more information, please refer to LINE's official doc, ",(0,l.kt)("a",{parentName:"p",href:"https://developers.line.biz/en/reference/messaging-api/#camera-roll-action"},"Camera Roll Actions"),"."),(0,l.kt)("h3",{id:"location-quick-reply"},"Location Quick Reply"),(0,l.kt)("p",null,"This action can be configured only with quick reply buttons. When a button associated with this action is tapped, the location screen in LINE is opened."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const quickReply = {\n  items: [\n    {\n      type: 'action',\n      action: {\n        type: 'location',\n        label: 'Location',\n      },\n    },\n  ],\n};\n")),(0,l.kt)("p",null,"For more information, please refer to LINE's official doc, ",(0,l.kt)("a",{parentName:"p",href:"https://developers.line.biz/en/reference/messaging-api/#location-action"},"Location Action"),"."),(0,l.kt)("h2",{id:"sending-messages-with-icon-and-display-name"},"Sending Messages with Icon and Display Name"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/3382565/79414458-44faab80-7fdd-11ea-9b72-d039df1addf3.png",alt:null})),(0,l.kt)("p",null,"You can specify the icon and display name by providing the ",(0,l.kt)("inlineCode",{parentName:"p"},"sender")," property in the message options:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const sender = {\n  name: 'Cony',\n  iconUrl: 'https://line.me/conyprof',\n};\n\nawait context.sendText('Hello, I am Cony!!', { sender });\nawait context.sendImage(\n  {\n    originalContentUrl: 'https://example.com/image.jpg',\n    previewImageUrl: 'https://example.com/preview.jpg',\n  },\n  { sender }\n);\n")),(0,l.kt)("p",null,"If you prefer to send messages with LINE original ",(0,l.kt)("a",{parentName:"p",href:"https://developers.line.biz/en/reference/messaging-api/#message-objects"},"message objects"),", you can provide the ",(0,l.kt)("inlineCode",{parentName:"p"},"sender")," property in the message object:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"await context.send([\n  {\n    type: 'text',\n    text: 'Hello, I am Cony!!',\n    sender: {\n      name: 'Cony',\n      iconUrl: 'https://line.me/conyprof',\n    },\n  },\n]);\n")),(0,l.kt)("p",null,"For more info, refer to LINE's official doc, ",(0,l.kt)("a",{parentName:"p",href:"https://developers.line.biz/zh-hant/docs/messaging-api/icon-nickname-switch/#summary"},"Change icon and display name"),"."),(0,l.kt)("h2",{id:"rate-limits"},"Rate Limits"),(0,l.kt)("p",null,"Just like many chat channels, LINE has rate limits for each endpoint. If you continue to send requests exceeding the rate limit for an extended period, your bot might stop responding. It is because LINE blocks incoming requests to your bot."),(0,l.kt)("p",null,"You have to take care Rate Limits if you attempt to build a campaign bot with massive sudden traffic, e.g., super discount for Black Friday."),(0,l.kt)("h3",{id:"send-api"},"Send API"),(0,l.kt)("p",null,"For ",(0,l.kt)("strong",{parentName:"p"},"Send API"),", you have to follow the below Rate Limits:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"100,000 requests per minute"),(0,l.kt)("li",{parentName:"ul"},"1,700 requests per second")),(0,l.kt)("p",null,"For more information, please refer to LINE's API doc, ",(0,l.kt)("a",{parentName:"p",href:"https://developers.line.biz/en/reference/messaging-api/#rate-limits"},"Rate Limits")))}u.isMDXComponent=!0}}]);