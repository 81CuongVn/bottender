"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8400],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),c=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=c(n),m=r,f=d["".concat(l,".").concat(m)]||d[m]||u[m]||a;return n?o.createElement(f,s(s({ref:t},p),{},{components:n})):o.createElement(f,s({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,s=new Array(a);s[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var c=2;c<a;c++)s[c]=n[c];return o.createElement.apply(null,s)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},9880:(e,t,n)=>{n.r(t),n.d(t,{frontMatter:()=>i,contentTitle:()=>l,metadata:()=>c,assets:()=>p,toc:()=>u,default:()=>m});var o=n(87462),r=n(63366),a=(n(67294),n(3905)),s=["components"],i={title:"Bottender",author:"C. T. Lin",authorURL:"https://twitter.com/chentsulin",authorTitle:"Co-Creator of Bottender",authorTwitter:"chentsulin",authorImageURL:"https://avatars1.githubusercontent.com/u/3382565?s=460&v=4"},l=void 0,c={permalink:"/blog/2017/10/31/bottender",source:"@site/blog/2017-10-31-bottender.md",title:"Bottender",description:"We're very proud to open-source Bottender, a JavaScript framework for cross-platform bots, built on top of Messaging-APIs and lots of great tools from the JavaScript community!",date:"2017-10-31T00:00:00.000Z",formattedDate:"October 31, 2017",tags:[],readingTime:2.875,truncated:!0,authors:[{name:"C. T. Lin",title:"Co-Creator of Bottender",url:"https://twitter.com/chentsulin",imageURL:"https://avatars1.githubusercontent.com/u/3382565?s=460&v=4"}],prevItem:{title:"Bottender 0.15",permalink:"/blog/2018/08/03/bottender-0_15"}},p={authorsImageUrls:[void 0]},u=[{value:"Motivation",id:"motivation",children:[],level:2},{value:"Only JavaScript. Handler is a function",id:"only-javascript-handler-is-a-function",children:[],level:2},{value:"Control Asynchronous Flow using Async Functions",id:"control-asynchronous-flow-using-async-functions",children:[],level:2},{value:"Keep Conversation State at Session Store",id:"keep-conversation-state-at-session-store",children:[],level:2},{value:"Simple deployment",id:"simple-deployment",children:[],level:2}],d={toc:u};function m(e){var t=e.components,i=(0,r.Z)(e,s);return(0,a.kt)("wrapper",(0,o.Z)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"We're very proud to open-source ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/yoctol/bottender"},"Bottender"),", a JavaScript framework for cross-platform bots, built on top of ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/Yoctol/messaging-apis"},"Messaging-APIs")," and lots of great tools from the JavaScript community!"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"bottender logo",src:n(17205).Z})),(0,a.kt)("p",null,"To begin with, install ",(0,a.kt)("inlineCode",{parentName:"p"},"bottender")," globally from the npm registry:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"npm install -g bottender\n")),(0,a.kt)("p",null,"And enter interactive bot creation process with:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"bottender init\n")),(0,a.kt)("p",null,"After answering a few questions, a new bot will be created for you."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"bottender init screenshot",src:n(90825).Z})),(0,a.kt)("br",null),(0,a.kt)("h2",{id:"motivation"},"Motivation"),(0,a.kt)("p",null,"We are eager to envision a future of modern and friendly bot development, because we believe bots are the next big thing in terms of impact, scale and complexity."),(0,a.kt)("p",null,"Bot development should benefit from the latest improvements in JavaScript. Thanks to Babel, Node.js and the V8 engine, modern developers have escaped from call-back hell, but still have full access to the power of asynchronous error handling and state maintenance."),(0,a.kt)("p",null,"Also, bot development should be friendly. That is, developing bots on multiple messaging platforms should imply a consistent development experience without losing any of the characteristics or features of each platform."),(0,a.kt)("p",null,"Here comes Bottender, our proposal of modern and friendly bot development."),(0,a.kt)("br",null),(0,a.kt)("h2",{id:"only-javascript-handler-is-a-function"},"Only JavaScript. Handler is a function"),(0,a.kt)("p",null,"The advantages of this approach over similar models is that you can do whatever you want in your function. And because of that, your entire system remains highly composable and testable."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"bot.onEvent((context) => {\n  if (context.event.isText) {\n    console.log('Cool. You sent a text to me.');\n  }\n});\n")),(0,a.kt)("p",null,"Furthermore, this handler function are fully testable without pain. Your test suite can simply import and test it."),(0,a.kt)("br",null),(0,a.kt)("h2",{id:"control-asynchronous-flow-using-async-functions"},"Control Asynchronous Flow using Async Functions"),(0,a.kt)("p",null,"When it comes to database queries or asynchronous API calls, modern async/await syntax give you great advantage to control your logic. Bottender's first class async/await support let you simply pass in any ",(0,a.kt)("inlineCode",{parentName:"p"},"async")," handler. Farewell to callback hells."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"bot.onEvent(async (context) => {\n  if (context.event.text === 'you shoull call api') {\n    const result = await callSomeAsyncAPI(context.event.text);\n    await context.sendText(result);\n  }\n});\n")),(0,a.kt)("br",null),(0,a.kt)("h2",{id:"keep-conversation-state-at-session-store"},"Keep Conversation State at Session Store"),(0,a.kt)("p",null,"Conversation state can be initially defined with ",(0,a.kt)("inlineCode",{parentName:"p"},"bot.setInitialState()"),", and can be modified during conversation using ",(0,a.kt)("inlineCode",{parentName:"p"},"context.setState()"),". The state control is handled by underlying session store."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"bot.setInitialState({\n  todos: [],\n});\n\nbot.onEvent((context) => {\n  if (context.event.isText) {\n    context.setState({\n      todos: context.state.todos.concat(context.event.text),\n    });\n  }\n});\n")),(0,a.kt)("p",null,"You can use ",(0,a.kt)("inlineCode",{parentName:"p"},"memory")," session store in development, and replace it with persistence session stores on production."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const { FileSessionStore } = require('bottender');\n\nconst bot = new MessengerBot({\n  sessionStore: new FileSessionStore(),\n});\n")),(0,a.kt)("p",null,"We provide not only ",(0,a.kt)("inlineCode",{parentName:"p"},"file")," session store but also ",(0,a.kt)("inlineCode",{parentName:"p"},"redis")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"mongo")," session stores. You can even submit your session store by following the interface implementation."),(0,a.kt)("br",null),(0,a.kt)("h2",{id:"simple-deployment"},"Simple deployment"),(0,a.kt)("p",null,"To put your bot logic online, you need a HTTP server. Bottender provides simple ",(0,a.kt)("inlineCode",{parentName:"p"},"createServer()")," function that do the trick for you, the server created can be extended as well."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const createServer = require('bottender/express');\n\nconst server = createServer(bot);\n\nserver.listen(3000, () => {\n  console.log('bot server is running on 3000 port');\n});\n")),(0,a.kt)("p",null,"Bottender supports four Node.js server frameworks, simply require corresponding ",(0,a.kt)("inlineCode",{parentName:"p"},"createServer()")," from submodules."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// import from express\nconst createServer = require('bottender/express');\n\n// import from koa\nconst createServer = require('bottender/koa');\n\n// import from micro\nconst createServer = require('bottender/micro');\n\n// import from restify\nconst createServer = require('bottender/restify');\n")),(0,a.kt)("p",null,"Since Bottender works as a Node.js HTTP server, you can easily deploy your bots to PaaS like ",(0,a.kt)("a",{parentName:"p",href:"https://www.heroku.com/"},"Heroku")," or ",(0,a.kt)("a",{parentName:"p",href:"https://zeit.co/now"},"Now"),". For more details, check out the ",(0,a.kt)("a",{parentName:"p",href:"https://bottender.js.org/docs/Guides-Deployment"},"Deployment")," guide."))}m.isMDXComponent=!0},90825:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/init-screenshot-8653ddc76d8f7cf964725d714d0787f6.png"},17205:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/logo-600x600-b1e3fd17a9583b6ea7f9ba10b2656242.png"}}]);