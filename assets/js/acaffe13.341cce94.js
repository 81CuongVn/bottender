"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[88664],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>g});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=p(n),g=r,m=d["".concat(l,".").concat(g)]||d[g]||u[g]||o;return n?a.createElement(m,s(s({ref:t},c),{},{components:n})):a.createElement(m,s({ref:t},c))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,s=new Array(o);s[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var p=2;p<o;p++)s[p]=n[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},78482:(e,t,n)=>{n.r(t),n.d(t,{frontMatter:()=>i,contentTitle:()=>l,metadata:()=>p,assets:()=>c,toc:()=>u,default:()=>g});var a=n(87462),r=n(63366),o=(n(67294),n(3905)),s=["components"],i={title:"Bottender 1.2: Serverless, NLU Integration, and More",author:"C. T. Lin",authorURL:"https://twitter.com/chentsulin",authorTitle:"Co-Creator of Bottender",authorTwitter:"chentsulin",authorImageURL:"https://avatars1.githubusercontent.com/u/3382565?s=460&v=4"},l=void 0,p={permalink:"/blog/2020/01/22/bottender-1_2",source:"@site/blog/2020-01-22-bottender-1_2.md",title:"Bottender 1.2: Serverless, NLU Integration, and More",description:"We are excited to introduce Bottender 1.2 today, featuring:",date:"2020-01-22T00:00:00.000Z",formattedDate:"January 22, 2020",tags:[],readingTime:3.58,truncated:!0,authors:[{name:"C. T. Lin",title:"Co-Creator of Bottender",url:"https://twitter.com/chentsulin",imageURL:"https://avatars1.githubusercontent.com/u/3382565?s=460&v=4"}],prevItem:{title:"Bottender 1.3: WhatsApp Support, TypeScript Improvement",permalink:"/blog/2020/03/06/bottender-1_3"},nextItem:{title:"Bottender 1.1: Multi-Channel Routing, Better Slack APIs Support in Chat, View, Block Kit",permalink:"/blog/2019/12/27/bottender-1_1"}},c={authorsImageUrls:[void 0]},u=[{value:"Serverless Supporting and Documentation",id:"serverless-supporting-and-documentation",children:[],level:2},{value:"Built-In Support for Intent Labeling",id:"built-in-support-for-intent-labeling",children:[],level:2},{value:"Packages to Integrate with NLU Services",id:"packages-to-integrate-with-nlu-services",children:[],level:2},{value:"Accessing Session Store",id:"accessing-session-store",children:[],level:2},{value:"Accessing Messaging Clients",id:"accessing-messaging-clients",children:[],level:2},{value:"What&#39;s Next?",id:"whats-next",children:[],level:2}],d={toc:u};function g(e){var t=e.components,n=(0,r.Z)(e,s);return(0,o.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/3382565/72883961-41d68300-3d40-11ea-9e86-323d77871e41.png",alt:null})),(0,o.kt)("p",null,"We are excited to introduce Bottender 1.2 today, featuring:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("a",{parentName:"strong",href:"/blog/2020/01/22/bottender-1_2#serverless-supporting-and-documentation"},"Serverless Support and Documentation"),":")," Zeit Now v2 and AWS Lambda"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("a",{parentName:"strong",href:"/blog/2020/01/22/bottender-1_2#built-in-support-for-intent-labeling"},"Built-In Support for Intent Labeling"),":")," Bottender context now support labeling user intent and handled status."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("a",{parentName:"strong",href:"/blog/2020/01/22/bottender-1_2#packages-to-integrate-with-nlu-services"},"Packages to Integrate with NLU Services"),":")," Bots can now integrate with popular NLU services Dialogflow, LUIS, QnA Maker, and Rasa with less efforts."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("a",{parentName:"strong",href:"https://bottender.js.org/blog/2020/01/22/bottender-1_2#accessing-session-store"},"Accessing Session Store"),":")," Manipulating session data directly if you needed."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("a",{parentName:"strong",href:"/blog/2020/01/22/bottender-1_2#accessing-messaging-clients"},"Accessing Messaging Clients"),":")," Getting configured messaging clients out of the box to call API anytime.")),(0,o.kt)("p",null,"All of these benefits are non-breaking and fully backward compatible. You can update it by running:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"npm install bottender@latest\n")),(0,o.kt)("h2",{id:"serverless-supporting-and-documentation"},"Serverless Supporting and Documentation"),(0,o.kt)("p",null,"Since Bottender aims to be server-agnostic from the very beginning, this makes it possible to integrate with most of Node.js server frameworks and even serverless frameworks via HTTP protocol."),(0,o.kt)("p",null,"In the last few months, we were trying to deploy Bottender bot as a function on serverless environments such as ",(0,o.kt)("a",{parentName:"p",href:"https://zeit.co/"},"Zeit Now")," or ",(0,o.kt)("a",{parentName:"p",href:"https://aws.amazon.com/lambda/"},"AWS Lambda")," and finally got succeeded."),(0,o.kt)("p",null,"You can check out ",(0,o.kt)("a",{parentName:"p",href:"https://bottender.js.org/docs/advanced-guides-deployment#zeit-now-20"},"step-by-step deployment guide for Zeit Now")," and ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/Yoctol/bottender/tree/master/examples/with-aws-lambda"},"AWS Lambda example")," for further details."),(0,o.kt)("p",null,"We understand that the bundle size and performance is quite sensitive while deploying to the serverless environment, more optimization and documentation or examples for Google Cloud Functions and Azure Functions are still ongoing."),(0,o.kt)("h2",{id:"built-in-support-for-intent-labeling"},"Built-In Support for Intent Labeling"),(0,o.kt)("p",null,"Bottender v1.2 introduces a new API ",(0,o.kt)("inlineCode",{parentName:"p"},"context.setIntent()")," for labeling intent to the conversation context:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"context.setIntent('greeting');\n\ncontext.intent; // 'greeting'\n")),(0,o.kt)("p",null,"Furthermore, you can also set handled status by ",(0,o.kt)("inlineCode",{parentName:"p"},"context.setAsHandled()")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"context.setAsNotHandled()"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"context.setAsHandled();\n\ncontext.isHandled; // true\n\ncontext.setAsNotHandled();\n\ncontext.isHandled; // false\n")),(0,o.kt)("p",null,"This feature might found not very useful at this moment, but it's the key to the chatbot analytics, and we will soon introduce ",(0,o.kt)("a",{parentName:"p",href:"https://chatbase.com/"},"Chatbase")," and ",(0,o.kt)("a",{parentName:"p",href:"https://www.dashbot.io/"},"Dashbot")," integrations on top of it in the future release."),(0,o.kt)("h2",{id:"packages-to-integrate-with-nlu-services"},"Packages to Integrate with NLU Services"),(0,o.kt)("p",null,"In v1.2, we announced four npm packages to integrate with the great natural language understanding (NLU) services:\n",(0,o.kt)("a",{parentName:"p",href:"https://dialogflow.com/"},"Google Dialogflow"),", ",(0,o.kt)("a",{parentName:"p",href:"https://www.luis.ai/"},"Microsoft LUIS"),", ",(0,o.kt)("a",{parentName:"p",href:"https://www.qnamaker.ai/"},"Microsoft QnA Maker")," and ",(0,o.kt)("a",{parentName:"p",href:"https://rasa.com/"},"Rasa"),"."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"@bottender/dialogflow")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"@bottender/luis")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"@bottender/qna-maker")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"@bottender/rasa"))),(0,o.kt)("p",null,"To understand how those packages work, let's use ",(0,o.kt)("inlineCode",{parentName:"p"},"Dialogflow")," as an example."),(0,o.kt)("p",null,"After installing the ",(0,o.kt)("inlineCode",{parentName:"p"},"@bottender/dialogflow")," package, you can create an action using ",(0,o.kt)("inlineCode",{parentName:"p"},"dialogflow")," function and put it in your bot:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const dialogflow = require('@bottender/dialogflow');\n\nasync function SayHello(context) {\n  await context.sendText('Hello!');\n}\n\nasync function Unknown(context) {\n  await context.sendText('Sorry, I don\u2019t know what you say.');\n}\n\nconst Dialogflow = dialogflow({\n  projectId: process.env.GOOGLE_APPLICATION_PROJECT_ID,\n  actions: {\n    greeting: SayHello,\n  },\n});\n\nmodule.exports = async function App() {\n  return chain([\n    Dialogflow, //\n    Unknown,\n  ]);\n};\n")),(0,o.kt)("p",null,"The bot in the above example says ",(0,o.kt)("inlineCode",{parentName:"p"},"Hello!")," when the intent received from Dialogflow is ",(0,o.kt)("inlineCode",{parentName:"p"},"greeting"),". Otherwise, it replies with a fallback sentence."),(0,o.kt)("p",null,"In addition, it automatically calls ",(0,o.kt)("inlineCode",{parentName:"p"},"context.setIntent()")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"context.setAsNotHandled()")," methods that we mentioned earlier to label the intent and handled status under the hood."),(0,o.kt)("h2",{id:"accessing-session-store"},"Accessing Session Store"),(0,o.kt)("p",null,"Bottender now supports accessing underlying session store configured by ",(0,o.kt)("inlineCode",{parentName:"p"},"bottender.config.js"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const { getSessionStore } = require('bottender');\n\nconst sessionStore = getSessionStore();\n")),(0,o.kt)("p",null,"You may want to get particular session data or clean up a specific session by manipulating the session store directly."),(0,o.kt)("h2",{id:"accessing-messaging-clients"},"Accessing Messaging Clients"),(0,o.kt)("p",null,"Bottender now supports accessing underlying ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/Yoctol/messaging-apis"},"messaging clients")," configured by ",(0,o.kt)("inlineCode",{parentName:"p"},"bottender.config.js"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const { getClient } = require('bottender');\n\nconst messenger = getClient('messenger');\nconst line = getClient('line');\n")),(0,o.kt)("p",null,"For example, to send a text message to the user by user id, you may call ",(0,o.kt)("inlineCode",{parentName:"p"},"sendText")," method on Messenger client with some extra parameters:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const messenger = getClient('messenger');\n\nmessenger.sendText(USER_ID, 'Hello!', { tag: 'CONFIRMED_EVENT_UPDATE' });\n")),(0,o.kt)("p",null,"And it could also be done in LINE by using ",(0,o.kt)("inlineCode",{parentName:"p"},"pushText")," method:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const line = getClient('line');\n\nline.pushText(USER_ID, 'Hello!');\n")),(0,o.kt)("h2",{id:"whats-next"},"What's Next?"),(0,o.kt)("p",null,"We are always welcome any feedback and feature requests from the community; we believe that listening to the community makes perfect."),(0,o.kt)("p",null,"One of the most concerned topics in the period is TypeScript usage. Therefore, we will focus on polishing TypeScript types and better TypeScript support with Create Bottender App and Bottender core in the upcoming month."),(0,o.kt)("p",null,"WhatsApp connector is another notable feature we're currently working on. There are a lot of users ever request this feature."),(0,o.kt)("p",null,"Don't be shy! If you're using Bottender in your bot, send us a pull request to our ",(0,o.kt)("a",{parentName:"p",href:"https://bottender.js.org/users"},"users")," page to add your bot. Let us know how you use Bottender!"))}g.isMDXComponent=!0}}]);